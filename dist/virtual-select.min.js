/*!
 * Virtual Select v1.0.5
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var t={"./src/virtual-select.js":
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/(t,e,i)=>{function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=l(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,n=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw n}}}}function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}i.r(e),i.d(e,{VirtualSelect:()=>h});var u={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);try{this.setProps(e),this.setDisabledOptions(e.disabledOptions),this.setOptions(e.options),this.render(),this.addEvents(),this.setMethods(),e.selectedValue&&this.setValueMethod(e.selectedValue,this.silentInitialValueSet)}catch(t){console.warn("Couldn't initiate Virtual Select"),console.error(t)}}var e,i,l;return e=t,l=[{key:"init",value:function(e){var i=e.ele;if(i){var s=!1;if("string"!=typeof i||(i=document.querySelector(i))){void 0===i.length&&(i=[i],s=!0);var o=[];return i.forEach((function(i){e.ele=i,o.push(new t(e))})),s?o[0]:o}}}},{key:"closeAllDropbox",value:function(t){document.querySelectorAll(".vscomp-wrapper").forEach((function(e){t&&t===e||e.parentElement.virtualSelect.closeDropbox()}))}},{key:"resetForm",value:function(t){var e=t.target.closest("form");e&&e.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(t,e){this.virtualSelect.setValueMethod(t,e)}},{key:"setOptionsMethod",value:function(t){this.virtualSelect.setOptionsMethod(t)}},{key:"setDisabledOptionsMethod",value:function(t){this.virtualSelect.setDisabledOptionsMethod(t)}},{key:"toggleSelectAll",value:function(t){this.virtualSelect.toggleAllOptions(t)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(t){this.virtualSelect.addOption(t,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"version",value:function(){return"v1.0.5"}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}}],(i=[{key:"render",value:function(){if(this.$ele){var t="vscomp-wrapper",e=this.getTooltipAttrText("",!this.multiple,!0),i=this.getTooltipAttrText("Clear"),s=this.optionsHeight,o="",n={},l={"max-height":s},a={"z-index":this.zIndex};this.dropboxWidth&&(a.width=this.dropboxWidth),this.multiple&&(t+=" multiple",this.disableSelectAll||(t+=" has-select-all")),"top"===this.position&&(t+=" position-top"),this.hideClearButton||(t+=" has-clear-button"),this.required&&(o="required"),this.keepAlwaysOpen?(t+=" keep-always-open opened",l.height=s,n.height=s):t+=" closed";var r='<div class="'.concat(t,'" tabindex="0">\n        <input type="text" name="').concat(this.name,'" class="vscomp-hidden-input" ').concat(o,'>\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(e,">\n            ").concat(this.placeholder,'\n          </div>\n          <div class="vscomp-arrow"></div>\n          <div class="vscomp-clear-button toggle-button-child" ').concat(i,'>\n          </div>\n        </div>\n        <div class="vscomp-dropbox" ').concat(this.getStyleText(a),'>\n          <div class="vscomp-search-wrapper"></div>\n          <div class="vscomp-options-container" ').concat(this.getStyleText(l),'>\n            <div class="vscomp-options-list">\n              <div class="vscomp-options"></div>\n            </div>\n          </div>\n          <div class="vscomp-no-options" ').concat(this.getStyleText(n),">").concat(this.noOptionsText,'</div>\n          <div class="vscomp-no-search-results" ').concat(this.getStyleText(n),">").concat(this.noSearchResultsText,"</div>\n        </div>\n      </div>");this.$ele.innerHTML=r,this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropbox=this.$ele.querySelector(".vscomp-dropbox"),this.$search=this.$ele.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$ele.querySelector(".vscomp-options-container"),this.$optionsList=this.$ele.querySelector(".vscomp-options-list"),this.$options=this.$ele.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$ele.setAttribute("name",this.name),this.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions()}}},{key:"renderOptions",value:function(){var t,e=this,i="",s=this.getVisibleOptions(),o="",n="",l=!(!this.markSearchResults||!this.searchValue),a=this.getStyleText({height:this.optionHeight+"px"});if(l&&(t=new RegExp("(".concat(this.searchValue,")"),"gi")),this.multiple&&(o='<span class="checkbox-icon"></span>'),this.allowNewOption){var r=this.getTooltipAttrText("New Option");n='<span class="vscomp-new-option-icon" '.concat(r,"></span>")}s.forEach((function(s){var r=s.label,u="vscomp-option",h=e.getTooltipAttrText("",!0),c=o,p="",d="";s.isFocused&&(u+=" focused"),s.isDisabled&&(u+=" disabled"),s.isGroupTitle?(u+=" group-title",c=""):s.isSelected&&(u+=" selected"),s.isGroupOption&&(u+=" group-option"),s.description&&(d='<div class="vscomp-option-description" '.concat(h,">").concat(s.description,"</div>")),s.isCurrentNew?(u+=" current-new",p+=n):l&&!s.isGroupTitle&&(r=r.replace(t,"<mark>$1</mark>")),i+='<div class="'.concat(u,'" data-value="').concat(s.value,'" data-index="').concat(s.index,'" data-visible-index="').concat(s.visibleIndex,'" ').concat(a,">\n          ").concat(c,'\n          <span class="vscomp-option-text" ').concat(h,">\n            ").concat(r,"\n          </span>\n          ").concat(d,"\n          ").concat(p,"\n        </div>")})),this.$options.innerHTML=i;var u=!this.options.length,h=!u&&!s.length;this.allowNewOption||this.toggleClass(this.$wrapper,"has-no-search-results",h),this.toggleClass(this.$wrapper,"has-no-options",u),this.setOptionsPosition(),this.setOptionsTooltip(),this.moveFocusedOptionToView()}},{key:"renderSearch",value:function(){if(this.hasSearch){var t="";this.multiple&&!this.disableSelectAll&&(t='<span class="checkbox-icon toggle-all-options"></span>');var e='<div class="vscomp-search-container">\n        '.concat(t,'\n        <input type="text" class="vscomp-search-input" placeholder="Search...">\n        <span class="vscomp-search-clear">&times;</span>\n      </div>');this.$search.innerHTML=e,this.$searchInput=this.$ele.querySelector(".vscomp-search-input"),this.$searchClear=this.$ele.querySelector(".vscomp-search-clear"),this.$toggleAllOptions=this.$ele.querySelector(".toggle-all-options"),this.searchFromApi||this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllOptions,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"addEvent",value:function(t,e,i){var s=this;t&&(e=this.removeArrayEmpty(e.split(" "))).forEach((function(e){var o="".concat(i,"-").concat(e),n=s.events[o];n||(n=s[i].bind(s),s.events[o]=n),(t=s.getElements(t)).forEach((function(t){t.addEventListener(e,n)}))}))}},{key:"dispatchEvent",value:function(t,e){t&&(t=this.getElements(t),setTimeout((function(){t.forEach((function(t){t.dispatchEvent(new Event(e,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(e){t.closeAllDropbox(e.target.closest(".vscomp-wrapper"))}},{key:"onKeyDown",value:function(t){var e=t.which||t.keyCode,i=u[e];i&&this[i](t)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(t){t.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(t){this.selectOption(t.target.closest(".vscomp-option:not(.disabled):not(.group-title)"))}},{key:"onOptionsMouseOver",value:function(t){var e=t.target.closest(".vscomp-option:not(.disabled):not(.group-title)");e&&this.focusOption(null,e)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(t){t.stopPropagation(),this.setSearchValue(t.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"setProps",value:function(t){t=this.setDefaultProps(t),this.setPropsFromElementAttr(t),this.$ele=t.ele,this.valueKey=t.valueKey,this.labelKey=t.labelKey,this.descriptionKey=t.descriptionKey,this.aliasKey=t.aliasKey,this.optionsCount=parseInt(t.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionHeightText=t.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=this.convertToBoolean(t.multiple),this.hasSearch=this.convertToBoolean(t.search),this.hideClearButton=this.convertToBoolean(t.hideClearButton),this.hasOptionDescription=this.convertToBoolean(t.hasOptionDescription),this.silentInitialValueSet=this.convertToBoolean(t.silentInitialValueSet),this.allowNewOption=this.convertToBoolean(t.allowNewOption),this.markSearchResults=this.convertToBoolean(t.markSearchResults),this.showSelectedOptionsFirst=this.convertToBoolean(t.showSelectedOptionsFirst),this.disableSelectAll=this.convertToBoolean(t.disableSelectAll),this.keepAlwaysOpen=this.convertToBoolean(t.keepAlwaysOpen),this.noOptionsText=t.noOptionsText,this.noSearchResultsText=t.noSearchResultsText,this.placeholder=t.placeholder,this.position=t.position,this.dropboxWidth=t.dropboxWidth,this.tooltipFontSize=t.tooltipFontSize,this.tooltipAlignment=t.tooltipAlignment,this.tooltipMaxWidth=t.tooltipMaxWidth,this.noOfDisplayValues=parseInt(t.noOfDisplayValues),this.zIndex=parseInt(t.zIndex),this.maxValues=parseInt(t.maxValues),this.name=t.name,this.selectedValues=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,this.isShowAllSelectedText=t.isShowAllSelectedText||!1,this.searchFromApi=t.searchFromApi||!1,this.required=t.required||!1,this.optionsHeight=this.optionsCount*this.optionHeight+"px",(void 0===t.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0),this.maxValues&&(this.disableSelectAll=!0)}},{key:"setDefaultProps",value:function(t){var e={valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,hasOptionDescription:!1,silentInitialValueSet:!1,disableSelectAll:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",showSelectedOptionsFirst:!1,name:"",keepAlwaysOpen:!1,maxValues:0};return t.hasOptionDescription&&(e.optionsCount=4,e.optionHeight="60px"),Object.assign(e,t)}},{key:"setPropsFromElementAttr",value:function(t){var e=t.ele,i={multiple:"multiple",placeholder:"placeholder",name:"name","data-value-key":"valueKey","data-label-key":"labelKey","data-description-key":"descriptionKey","data-alias-key":"aliasKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-has-option-description":"hasOptionDescription","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults","data-tooltip-font-size":"tooltipFontSize","data-tooltip-alignment":"tooltipAlignment","data-tooltip-max-width":"tooltipMaxWidth","data-show-selected-options-first":"showSelectedOptionsFirst","data-disable-select-all":"disableSelectAll","data-keep-always-open":"keepAlwaysOpen","data-max-values":"maxValues"};for(var s in i){var o=e.getAttribute(s);"multiple"!==s||""!==o&&"true"!==o||(o=!0),o&&(t[i[s]]=o)}}},{key:"setMethods",value:function(){var e=this.$ele;e.virtualSelect=this,e.value=this.multiple?[]:"",e.reset=t.reset,e.setValue=t.setValueMethod,e.setOptions=t.setOptionsMethod,e.setDisabledOptions=t.setDisabledOptionsMethod,e.toggleSelectAll=t.toggleSelectAll,e.isAllSelected=t.isAllSelected,e.addOption=t.addOptionMethod,e.getNewValue=t.getNewValueMethod,e.getDisplayValue=t.getDisplayValueMethod,e.open=t.openMethod,e.close=t.closeMethod}},{key:"setValueMethod",value:function(t,e){Array.isArray(t)||(t=[t]),t=t.map((function(t){return t||0==t?t.toString():""}));var i=[];this.options.forEach((function(e){-1===t.indexOf(e.value)||e.isDisabled||e.isGroupTitle?e.isSelected=!1:(e.isSelected=!0,i.push(e.value))})),this.multiple||(i=i[0]),this.beforeValueSet(),this.setValue(i,!e),this.afterValueSet()}},{key:"setOptionsMethod",value:function(t){this.setOptions(t),this.afterSetOptions()}},{key:"setDisabledOptionsMethod",value:function(t){this.setDisabledOptions(t,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.map((function(t){return t.toString()})),this.disabledOptions=t,e&&t.length&&this.options.forEach((function(e){return e.isDisabled=-1!==t.indexOf(e.value),e}))}},{key:"setOptions",value:function(t){t||(t=[]);var e=[],i=this.disabledOptions,s=i.length,o=this.valueKey,n=this.labelKey,l=this.descriptionKey,a=this.aliasKey,r=this.hasOptionDescription,u=this.getString,h=this.getAlias,c=0,p=!1;t.forEach((function t(d){var v=u(d[o]),f=d.options,g=!!f,y={index:c,value:v,label:u(d[n]),alias:h(d[a]),isVisible:!0,isGroupTitle:g};if(s&&(y.isDisabled=-1!==i.indexOf(v)),d.isGroupOption&&(y.isGroupOption=!0,y.groupIndex=d.groupIndex),r&&(y.description=u(d[l])),e.push(y),c++,g){var O=y.index;p=!0,f.forEach((function(e){e.isGroupOption=!0,e.groupIndex=O,t(e)}))}})),this.options=e,this.visibleOptionsCount=e.length,this.lastOptionIndex=this.options.length-1,this.newValues=[],this.hasOptionGroup=p,this.setSortedOptions()}},{key:"setSortedOptions",value:function(){var t=n(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(t=this.hasOptionGroup?this.sortOptionsGroup(t):this.sortOptions(t)),this.sortedOptions=t}},{key:"setVisibleOptions",value:function(){var t=n(this.sortedOptions),e=2*this.optionsCount,i=this.getVisibleStartIndex(),s=this.getNewOption(),o=i+e-1,l=0;s&&(s.visibleIndex=l,l++),t=t.filter((function(t){var e=!1;return t.isVisible&&!t.isCurrentNew&&(e=l>=i&&l<=o,t.visibleIndex=l,l++),e})),s&&(t=[s].concat(n(t))),this.visibleOptions=t,this.renderOptions()}},{key:"setOptionsPosition",value:function(t){void 0===t&&(t=this.getVisibleStartIndex());var e=t*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(e,"px, 0)"),this.setData(this.$options,"top",e)}},{key:"setOptionsTooltip",value:function(){var t=this,e=this.getVisibleOptions(),i=this.hasOptionDescription;e.forEach((function(e){var s=t.$dropbox.querySelector('.vscomp-option[data-index="'.concat(e.index,'"]'));t.setData(s.querySelector(".vscomp-option-text"),"tooltip",e.label),i&&t.setData(s.querySelector(".vscomp-option-description"),"tooltip",e.description)}))}},{key:"setValue",value:function(t,e){t?Array.isArray(t)?this.selectedValues=n(t):this.selectedValues=[t]:this.selectedValues=[];var i=this.multiple?this.selectedValues:this.selectedValues[0]||"";this.$ele.value=i,this.$hiddenInput.value=i,this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.setValueText(),this.toggleClass(this.$wrapper,"has-value",this.isNotEmpty(this.selectedValues)),this.toggleClass(this.$wrapper,"max-value-selected",this.isMaxValuesSelected),e&&this.dispatchEvent(this.$ele,"change")}},{key:"setValueText",value:function(){var t=[],e=[],i=this.selectedValues,s=i.length,n=this.noOfDisplayValues,l=0;if(this.isAllSelected&&this.isShowAllSelectedText)this.$valueText.innerHTML="All (".concat(s,")");else{var a,r=o(this.options);try{for(r.s();!(a=r.n()).done;){var u=a.value;if(!u.isCurrentNew){if(l>50)break;var h=u.value;if(-1!==i.indexOf(h)){var c=u.label;t.push(c),++l<=n&&e.push('<span class="vscomp-value-tag">'.concat(c,"</span>"))}}}}catch(t){r.e(t)}finally{r.f()}var p=s-n;p>0&&e.push('<span class="vscomp-value-tag more-value-count">+ '.concat(p," more...</span>"));var d=t.join(", ");if(""===d)this.$valueText.innerHTML=this.placeholder;else if(this.$valueText.innerHTML=d,this.multiple){var v=this.maxValues;if(this.hasEllipsis(this.$valueText)||v){var f="".concat(s);v&&(f+=" / ".concat(v)),this.$valueText.innerHTML="".concat(f," option").concat(1===s?"":"s"," selected")}else e=[]}}this.setData(this.$valueText,"tooltip",e.join(", "))}},{key:"setSearchValue",value:function(t,e){if(t!==this.searchValueOriginal){e||(this.$searchInput.value=t);var i,s=t.toLowerCase().trim(),o=0,n=!1,l=this.isOptionVisible;this.searchValue=s,this.searchValueOriginal=t,this.hasOptionGroup&&(i=this.getVisibleOptionGroupsMapping(s)),this.options.forEach((function(t){if(!t.isCurrentNew){var e=l(t,s,n,i);e.isVisible&&o++,n||(n=e.hasExactOption)}})),this.allowNewOption&&(s&&!n?(this.setNewOption(),o++):this.removeNewOption()),this.visibleOptionsCount=o,this.toggleClass(this.$wrapper,"has-search-value",t),this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}}},{key:"setOptionProp",value:function(t,e,i){this.options[t]&&(this.options[t][e]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var t=this.getMoreVisibleSides(this.$wrapper),e=!1;if(this.dropboxWidth){var i=this.$toggleButton.getBoundingClientRect(),s=window.innerWidth,o=parseFloat(this.dropboxWidth),n=i.left+o>s,l=o>i.right;n&&!l&&(e=!0)}this.toggleClass(this.$wrapper,"position-top","top"===t.vertical),this.toggleClass(this.$wrapper,"position-left",e)}}},{key:"setNewOption",value:function(){var t=this.searchValueOriginal.trim();if(t){var e=this.getNewOption();if(e){var i=e.index;this.setOptionProp(i,"value",t),this.setOptionProp(i,"label",t)}else{var s={value:t,label:t,isCurrentNew:!0};this.addOption(s)}}}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var t=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={"data-tooltip":t||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":e,"data-tooltip-allow-html":i};return this.getAttributesText(s)}},{key:"getOptionObj",value:function(t){if(t){var e=this.getString;return{index:t.index,value:e(t.value),label:e(t.label),description:e(t.description),alias:this.getAlias(t.alias),isCurrentNew:t.isCurrentNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var t=this.options[this.lastOptionIndex];if(t&&t.isCurrentNew)return t}},{key:"getOptionIndex",value:function(t){var e;return t&&this.options.some((function(i){if(i.value==t)return e=i.index,!0})),e}},{key:"getNewValue",value:function(){var t=this.newValues,e=this.selectedValues.filter((function(e){return-1!==t.indexOf(e)}));return this.multiple?e:e[0]}},{key:"getAlias",value:function(t){return t=t?(t=Array.isArray(t)?t.join(","):t.toString().trim()).toLowerCase():""}},{key:"getDisplayValue",value:function(){var t,e=[],i=this.selectedValues,s=o(this.options);try{for(s.s();!(t=s.n()).done;){var n=t.value;-1!==i.indexOf(n.value)&&e.push(n.label)}}catch(t){s.e(t)}finally{s.f()}return this.multiple?e:e[0]||""}},{key:"getVisibleOptionGroupsMapping",value:function(t){var e=this.options,i={},s=this.isOptionVisible;return(e=this.structureOptionGroup(e)).forEach((function(e){i[e.index]=e.options.some((function(e){return s(e,t).isVisible}))})),i}},{key:"openDropbox",value:function(t){var e=this;this.setDropboxPosition(),this.removeClass(this.$wrapper,"closed"),setTimeout((function(){e.addClass(e.$wrapper,"opened"),t||(e.moveSelectedOptionsFirst(),e.addClass(e.$wrapper,"focused"),e.focusSearchInput())}),0)}},{key:"closeDropbox",value:function(t){var e=this;if(this.keepAlwaysOpen)this.removeOptionFocus();else{var i=t?0:this.transitionDuration;setTimeout((function(){e.removeClass(e.$wrapper,"opened focused"),e.removeOptionFocus()}),0),setTimeout((function(){e.addClass(e.$wrapper,"closed")}),i)}}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return this.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var t=this.$searchInput;t&&t.focus()}},{key:"focusOption",value:function(t,e){var i,s=this.$dropbox.querySelector(".vscomp-option.focused");if(e)i=e;else if(s)i=this.getSibling(s,t);else{var o=this.getFirstVisibleOptionIndex();i=this.$dropbox.querySelector('.vscomp-option[data-visible-index="'.concat(o,'"]')),(this.hasClass(i,"disabled")||this.hasClass(i,"group-title"))&&(i=this.getSibling(i,"next"))}i&&i!==s&&(s&&this.removeClass(s,"focused"),this.addClass(i,"focused"),this.toggleFocusedProp(this.getData(i,"index"),!0),this.moveFocusedOptionToView(i))}},{key:"moveFocusedOptionToView",value:function(t){if(t||(t=this.$dropbox.querySelector(".vscomp-option.focused")),t){var e,i=this.$optionsContainer.getBoundingClientRect(),s=t.getBoundingClientRect(),o=i.top,n=i.bottom,l=i.height,a=s.top,r=s.bottom,u=s.height,h=t.offsetTop,c=this.getData(this.$options,"top","number");o>a?e=h+c:n<r&&(e=h-l+u+c),void 0!==e&&(this.$optionsContainer.scrollTop=e)}}},{key:"removeOptionFocus",value:function(){var t=this.$dropbox.querySelector(".vscomp-option.focused");t&&(this.removeClass(t,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(t){if(t){var e=!this.hasClass(t,"selected");if(e){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple)return void this.closeDropbox();var i=this.selectedValues,s=this.getData(t,"value"),o=this.getData(t,"index");if(this.toggleSelectedProp(o,e),e){if(this.multiple)i.push(s),this.toggleAllOptionsClass();else{i.length&&this.toggleSelectedProp(this.getOptionIndex(i[0]),!1),i=[s];var n=this.$ele.querySelector(".vscomp-option.selected");n&&this.toggleClass(n,"selected",!1),this.closeDropbox()}this.toggleClass(t,"selected")}else this.multiple&&(this.toggleClass(t,"selected"),this.removeItemFromArray(i,s),this.toggleAllOptionsClass(!1));this.hasClass(t,"current-new")&&this.beforeSelectNewValue(),this.setValue(i,!0)}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropbox.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(t){if(this.multiple&&!this.disableSelectAll){"boolean"!=typeof t&&(t=!this.hasClass(this.$toggleAllOptions,"checked"));var e=[];this.options.forEach((function(i){i.isDisabled||i.isCurrentNew||i.isGroupTitle||(i.isSelected=t,t&&e.push(i.value))})),this.toggleAllOptionsClass(t),this.setValue(e,!0),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(t){"boolean"!=typeof t&&(t=!1,this.options.length&&(t=!this.options.some((function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle})))),this.toggleClass(this.$toggleAllOptions,"checked",t),this.isAllSelected=t}},{key:"toggleFocusedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(t,"isFocused",e),this.focusedOptionIndex=t}},{key:"toggleSelectedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(t,"isSelected",e)}},{key:"scrollToTop",value:function(){var t=!this.isOpened();t&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),t&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(t){t.isSelected=!1})),this.beforeValueSet(!0),this.setValue(null,!0),this.afterValueSet()}},{key:"beforeValueSet",value:function(t){this.toggleAllOptionsClass(!t&&void 0)}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(){this.setOptionsHeight(),this.setVisibleOptions(),this.reset()}},{key:"addOption",value:function(t,e){if(t){this.lastOptionIndex++,t.index=this.lastOptionIndex;var i=this.getOptionObj(t);this.options.push(i),this.sortedOptions.push(i),e&&(this.visibleOptionsCount++,this.afterSetOptions())}}},{key:"removeOption",value:function(t){(t||0==t)&&(this.options.splice(t,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var t=this.getNewOption();t&&this.removeOption(t.index)}},{key:"beforeSelectNewValue",value:function(){var t=this,e=this.getNewOption(),i=e.index;this.newValues.push(e.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout((function(){t.setSearchValue(""),t.focusSearchInput()}),0)}},{key:"sortOptions",value:function(t){return t.sort((function(t,e){return t.isSelected||e.isSelected?t.isSelected&&(!e.isSelected||t.index<e.index)?-1:1:0}))}},{key:"sortOptionsGroup",value:function(t){var e=this.sortOptions;return(t=this.structureOptionGroup(t)).forEach((function(t){var i=t.options;t.isSelected=i.some((function(t){return t.isSelected})),t.isSelected&&e(i)})),e(t),this.destructureOptionGroup(t)}},{key:"isOptionVisible",value:function(t,e,i,s){var o=t.label.toLowerCase(),n=t.description,l=t.alias,a=-1!==o.indexOf(e);return t.isGroupTitle&&(a=s[t.index]),l&&!a&&(a=-1!==l.indexOf(e)),n&&!a&&(a=-1!==n.toLowerCase().indexOf(e)),t.isVisible=a,i||(i=o===e),{isVisible:a,hasExactOption:i}}},{key:"structureOptionGroup",value:function(t){var e=[],i={};return t.forEach((function(t){if(t.isGroupTitle){var s=[];t.options=s,i[t.index]=s,e.push(t)}})),t.forEach((function(t){t.isGroupOption&&i[t.groupIndex].push(t)})),e}},{key:"destructureOptionGroup",value:function(t){var e=[];return t.forEach((function(t){e.push(t),e=e.concat(t.options)})),e}},{key:"addClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).add.apply(i,n(e))})))}},{key:"removeClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).remove.apply(i,n(e))})))}},{key:"toggleClass",value:function(t,e,i){var s;if(t)return void 0!==i&&(i=Boolean(i)),this.getElements(t).forEach((function(t){s=t.classList.toggle(e,i)})),s}},{key:"hasClass",value:function(t,e){return!!t&&t.classList.contains(e)}},{key:"isEmpty",value:function(t){var e=!1;return t?Array.isArray(t)?0===t.length&&(e=!0):"object"===s(t)&&0===Object.keys(t).length&&(e=!0):e=!0,e}},{key:"isNotEmpty",value:function(t){return!this.isEmpty(t)}},{key:"setData",value:function(t,e,i){t&&(t.dataset[e]=i)}},{key:"getStyleText",value:function(t,e){var i="";for(var s in t)i+="".concat(s,": ").concat(t[s],";");return i&&!e&&(i='style="'.concat(i,'"')),i}},{key:"getElements",value:function(t){if(t)return void 0===t.length&&(t=[t]),t}},{key:"getData",value:function(t,e,i){if(t){var s=t?t.dataset[e]:"";return"number"===i?s=parseFloat(s)||0:"true"===s?s=!0:"false"===s&&(s=!1),s}}},{key:"removeItemFromArray",value:function(t,e,i){if(!Array.isArray(t)||!t.length||!e)return t;i&&(t=n(t));var s=t.indexOf(e);return-1!==s&&t.splice(s,1),t}},{key:"removeArrayEmpty",value:function(t){return Array.isArray(t)&&t.length?t.filter((function(t){return!!t})):[]}},{key:"getMoreVisibleSides",value:function(t){if(!t)return{};var e=t.getBoundingClientRect(),i=window.innerWidth,s=window.innerHeight,o=e.left,n=e.top;return{horizontal:o>i-o-e.width?"left":"right",vertical:n>s-n-e.height?"top":"bottom"}}},{key:"getSibling",value:function(t,e){var i="next"===e?"nextElementSibling":"previousElementSibling";do{t&&(t=t[i])}while(this.hasClass(t,"disabled")||this.hasClass(t,"group-title"));return t}},{key:"getAttributesText",value:function(t){var e="";if(!t)return e;for(var i in t){var s=t[i];void 0!==s&&(e+=" ".concat(i,'="').concat(s,'" '))}return e}},{key:"convertToBoolean",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=!0===t||"true"===t||!1!==t&&"false"!==t&&e}},{key:"hasEllipsis",value:function(t){return!!t&&t.scrollWidth>t.offsetWidth}},{key:"getString",value:function(t){return t||0===t?t.toString():""}}])&&r(e.prototype,i),l&&r(e,l),t}();document.addEventListener("reset",h.resetForm),window.VirtualSelect=h}},e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i("./src/virtual-select.js")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJrZXlEb3duTWV0aG9kTWFwcGluZyIsIjEzIiwiMjciLCIzOCIsIjQwIiwiVmlydHVhbFNlbGVjdCIsIm9wdGlvbnMiLCJ0aGlzIiwic2V0UHJvcHMiLCJzZXREaXNhYmxlZE9wdGlvbnMiLCJkaXNhYmxlZE9wdGlvbnMiLCJzZXRPcHRpb25zIiwicmVuZGVyIiwiYWRkRXZlbnRzIiwic2V0TWV0aG9kcyIsInNlbGVjdGVkVmFsdWUiLCJzZXRWYWx1ZU1ldGhvZCIsInNpbGVudEluaXRpYWxWYWx1ZVNldCIsImUiLCJjb25zb2xlIiwid2FybiIsImVycm9yIiwiJGVsZUFycmF5IiwiZWxlIiwic2luZ2xlRWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidW5kZWZpbmVkIiwibGVuZ3RoIiwiaW5zdGFuY2VzIiwiZm9yRWFjaCIsIiRlbGUiLCJwdXNoIiwiJGVsZVRvS2VlcE9wZW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwicGFyZW50RWxlbWVudCIsInZpcnR1YWxTZWxlY3QiLCJjbG9zZURyb3Bib3giLCIkZm9ybSIsInRhcmdldCIsImNsb3Nlc3QiLCJyZXNldCIsInZhbHVlIiwic2lsZW50Q2hhbmdlIiwic2V0T3B0aW9uc01ldGhvZCIsInNldERpc2FibGVkT3B0aW9uc01ldGhvZCIsImlzU2VsZWN0ZWQiLCJ0b2dnbGVBbGxPcHRpb25zIiwiaXNBbGxTZWxlY3RlZCIsImRhdGEiLCJhZGRPcHRpb24iLCJnZXROZXdWYWx1ZSIsImdldERpc3BsYXlWYWx1ZSIsIm9wZW5Ecm9wYm94Iiwid3JhcHBlckNsYXNzZXMiLCJ2YWx1ZVRvb2x0aXAiLCJnZXRUb29sdGlwQXR0clRleHQiLCJtdWx0aXBsZSIsImNsZWFyQnV0dG9uVG9vbHRpcCIsIm9wdGlvbnNIZWlnaHQiLCJyZXF1aXJlZCIsIm5vT3B0aW9uU3R5bGUiLCJvcHRpb25zU3R5bGUiLCJkcm9wYm94U3R5bGUiLCJ6SW5kZXgiLCJkcm9wYm94V2lkdGgiLCJ3aWR0aCIsImRpc2FibGVTZWxlY3RBbGwiLCJwb3NpdGlvbiIsImhpZGVDbGVhckJ1dHRvbiIsImtlZXBBbHdheXNPcGVuIiwiaGVpZ2h0IiwiaHRtbCIsIm5hbWUiLCJwbGFjZWhvbGRlciIsImdldFN0eWxlVGV4dCIsIm5vT3B0aW9uc1RleHQiLCJub1NlYXJjaFJlc3VsdHNUZXh0IiwiaW5uZXJIVE1MIiwiJHdyYXBwZXIiLCIkdG9nZ2xlQnV0dG9uIiwiJGNsZWFyQnV0dG9uIiwiJGRyb3Bib3giLCIkc2VhcmNoIiwiJG9wdGlvbnNDb250YWluZXIiLCIkb3B0aW9uc0xpc3QiLCIkb3B0aW9ucyIsIiR2YWx1ZVRleHQiLCIkaGlkZGVuSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJhZGRDbGFzcyIsInJlbmRlclNlYXJjaCIsInNldE9wdGlvbnNIZWlnaHQiLCJzZXRWaXNpYmxlT3B0aW9ucyIsInNlYXJjaFJlZ2V4IiwidmlzaWJsZU9wdGlvbnMiLCJnZXRWaXNpYmxlT3B0aW9ucyIsImNoZWNrYm94SHRtbCIsIm5ld09wdGlvbkljb25IdG1sIiwibWFya1NlYXJjaFJlc3VsdHMiLCJzZWFyY2hWYWx1ZSIsInN0eWxlVGV4dCIsIm9wdGlvbkhlaWdodCIsIlJlZ0V4cCIsImFsbG93TmV3T3B0aW9uIiwibmV3T3B0aW9uVG9vbHRpcCIsImQiLCJvcHRpb25MYWJlbCIsImxhYmVsIiwib3B0aW9uQ2xhc3NlcyIsIm9wdGlvblRvb2x0aXAiLCJsZWZ0U2VjdGlvbiIsInJpZ2h0U2VjdGlvbiIsImRlc2NyaXB0aW9uIiwiaXNGb2N1c2VkIiwiaXNEaXNhYmxlZCIsImlzR3JvdXBUaXRsZSIsImlzR3JvdXBPcHRpb24iLCJpc0N1cnJlbnROZXciLCJyZXBsYWNlIiwiaW5kZXgiLCJ2aXNpYmxlSW5kZXgiLCJoYXNOb09wdGlvbnMiLCJoYXNOb1NlYXJjaFJlc3VsdHMiLCJ0b2dnbGVDbGFzcyIsInNldE9wdGlvbnNQb3NpdGlvbiIsInNldE9wdGlvbnNUb29sdGlwIiwibW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXciLCJoYXNTZWFyY2giLCIkc2VhcmNoSW5wdXQiLCIkc2VhcmNoQ2xlYXIiLCIkdG9nZ2xlQWxsT3B0aW9ucyIsInNlYXJjaEZyb21BcGkiLCJhZGRFdmVudCIsImV2ZW50cyIsIm1ldGhvZCIsInJlbW92ZUFycmF5RW1wdHkiLCJzcGxpdCIsImV2ZW50IiwiZXZlbnRzS2V5IiwiY2FsbGJhY2siLCJiaW5kIiwiZ2V0RWxlbWVudHMiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiYnViYmxlcyIsImNsb3NlQWxsRHJvcGJveCIsImtleSIsIndoaWNoIiwia2V5Q29kZSIsImlzT3BlbmVkIiwic2VsZWN0Rm9jdXNlZE9wdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9jdXNPcHRpb24iLCJ0b2dnbGVEcm9wYm94Iiwic2VsZWN0T3B0aW9uIiwicmVtb3ZlT3B0aW9uRm9jdXMiLCJzdG9wUHJvcGFnYXRpb24iLCJzZXRTZWFyY2hWYWx1ZSIsImZvY3VzU2VhcmNoSW5wdXQiLCJzZXREZWZhdWx0UHJvcHMiLCJzZXRQcm9wc0Zyb21FbGVtZW50QXR0ciIsInZhbHVlS2V5IiwibGFiZWxLZXkiLCJkZXNjcmlwdGlvbktleSIsImFsaWFzS2V5Iiwib3B0aW9uc0NvdW50IiwicGFyc2VJbnQiLCJoYWxmT3B0aW9uc0NvdW50IiwiTWF0aCIsImNlaWwiLCJvcHRpb25IZWlnaHRUZXh0IiwicGFyc2VGbG9hdCIsImNvbnZlcnRUb0Jvb2xlYW4iLCJzZWFyY2giLCJoYXNPcHRpb25EZXNjcmlwdGlvbiIsInNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCIsInRvb2x0aXBGb250U2l6ZSIsInRvb2x0aXBBbGlnbm1lbnQiLCJ0b29sdGlwTWF4V2lkdGgiLCJub09mRGlzcGxheVZhbHVlcyIsIm1heFZhbHVlcyIsInNlbGVjdGVkVmFsdWVzIiwibmV3VmFsdWVzIiwidG9vbHRpcEVudGVyRGVsYXkiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJzZWFyY2hWYWx1ZU9yaWdpbmFsIiwiaXNTaG93QWxsU2VsZWN0ZWRUZXh0IiwiZGVmYXVsdE9wdGlvbnMiLCJPYmplY3QiLCJhc3NpZ24iLCJtYXBwaW5nIiwiayIsImdldEF0dHJpYnV0ZSIsInNldFZhbHVlIiwidG9nZ2xlU2VsZWN0QWxsIiwiYWRkT3B0aW9uTWV0aG9kIiwiZ2V0TmV3VmFsdWVNZXRob2QiLCJnZXREaXNwbGF5VmFsdWVNZXRob2QiLCJvcGVuIiwib3Blbk1ldGhvZCIsImNsb3NlIiwiY2xvc2VNZXRob2QiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJ2IiwidG9TdHJpbmciLCJ2YWxpZFZhbHVlcyIsImluZGV4T2YiLCJiZWZvcmVWYWx1ZVNldCIsImFmdGVyVmFsdWVTZXQiLCJhZnRlclNldE9wdGlvbnMiLCJzZXRPcHRpb25zUHJvcCIsInByZXBhcmVkT3B0aW9ucyIsImhhc0Rpc2FibGVkT3B0aW9ucyIsImdldFN0cmluZyIsImdldEFsaWFzIiwiaGFzT3B0aW9uR3JvdXAiLCJwcmVwYXJlT3B0aW9uIiwiY2hpbGRPcHRpb25zIiwib3B0aW9uIiwiYWxpYXMiLCJpc1Zpc2libGUiLCJncm91cEluZGV4IiwidmlzaWJsZU9wdGlvbnNDb3VudCIsImxhc3RPcHRpb25JbmRleCIsInNldFNvcnRlZE9wdGlvbnMiLCJzb3J0ZWRPcHRpb25zIiwic29ydE9wdGlvbnNHcm91cCIsInNvcnRPcHRpb25zIiwibWF4T3B0aW9uc1RvU2hvdyIsInN0YXJ0SW5kZXgiLCJnZXRWaXNpYmxlU3RhcnRJbmRleCIsIm5ld09wdGlvbiIsImdldE5ld09wdGlvbiIsImVuZEluZGV4IiwiaSIsImZpbHRlciIsImluVmlldyIsInJlbmRlck9wdGlvbnMiLCJ0b3AiLCJzdHlsZSIsInRyYW5zZm9ybSIsInNldERhdGEiLCIkb3B0aW9uRWxlIiwidHJpZ2dlckV2ZW50IiwibmV3VmFsdWUiLCJpc01heFZhbHVlc1NlbGVjdGVkIiwic2V0VmFsdWVUZXh0IiwiaXNOb3RFbXB0eSIsInZhbHVlVGV4dCIsInNlbGVjdGVkTGVuZ3RoIiwic2VsZWN0ZWRWYWx1ZXNDb3VudCIsIm1vcmVTZWxlY3RlZE9wdGlvbnMiLCJhZ2dyZWdhdGVkVmFsdWVUZXh0Iiwiam9pbiIsImhhc0VsbGlwc2lzIiwiY291bnRUZXh0Iiwic2tpcElucHV0U2V0IiwidmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmciLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJoYXNFeGFjdE9wdGlvbiIsImlzT3B0aW9uVmlzaWJsZSIsImdldFZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nIiwicmVzdWx0Iiwic2V0TmV3T3B0aW9uIiwicmVtb3ZlTmV3T3B0aW9uIiwic2Nyb2xsVG9Ub3AiLCJtb3JlVmlzaWJsZVNpZGVzIiwiZ2V0TW9yZVZpc2libGVTaWRlcyIsInNob3dPbkxlZnQiLCJidXR0b25Db29yZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ2aWV3cG9ydFdpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhpZGRlbk9uUmlnaHQiLCJsZWZ0IiwiaGlkZGVuT25MZWZ0IiwicmlnaHQiLCJ2ZXJ0aWNhbCIsIm5ld0luZGV4Iiwic2V0T3B0aW9uUHJvcCIsInNjcm9sbFRvcCIsImdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IiwidGV4dCIsImVsbGlwc2lzT25seSIsImFsbG93SHRtbCIsImdldEF0dHJpYnV0ZXNUZXh0IiwibGFzdE9wdGlvbiIsInNvbWUiLCJkaXNwbGF5VmFsdWVzIiwic3RydWN0dXJlT3B0aW9uR3JvdXAiLCJpc1NpbGVudCIsInNldERyb3Bib3hQb3NpdGlvbiIsInJlbW92ZUNsYXNzIiwibW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0IiwiaGFzQ2xhc3MiLCJmb2N1cyIsImRpcmVjdGlvbiIsIiRuZXdGb2N1c2VkRWxlIiwiJGZvY3VzZWRFbGUiLCJnZXRTaWJsaW5nIiwiZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgiLCJ0b2dnbGVGb2N1c2VkUHJvcCIsImdldERhdGEiLCJuZXdTY3JvbGxUb3AiLCJjb250YWluZXJSZWN0Iiwib3B0aW9uUmVjdCIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsImJvdHRvbSIsImNvbnRhaW5lckhlaWdodCIsIm9wdGlvblRvcCIsIm9wdGlvbkJvdHRvbSIsIm9wdGlvbk9mZnNldFRvcCIsIm9mZnNldFRvcCIsIm9wdGlvbnNUb3AiLCJpc0FkZGluZyIsInNlbGVjdGVkSW5kZXgiLCJ0b2dnbGVTZWxlY3RlZFByb3AiLCJ0b2dnbGVBbGxPcHRpb25zQ2xhc3MiLCJnZXRPcHRpb25JbmRleCIsIiRwcmV2U2VsZWN0ZWRPcHRpb24iLCJyZW1vdmVJdGVtRnJvbUFycmF5IiwiYmVmb3JlU2VsZWN0TmV3VmFsdWUiLCJmb2N1c2VkT3B0aW9uSW5kZXgiLCJpc0Nsb3NlZCIsImlzUmVzZXQiLCJyZXJlbmRlciIsImdldE9wdGlvbk9iaiIsInNwbGljZSIsInJlbW92ZU9wdGlvbiIsInNvcnQiLCJhIiwiYiIsImRlc3RydWN0dXJlT3B0aW9uR3JvdXAiLCJjaGlsZEFycmF5IiwiY29uY2F0IiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaXNBZGQiLCJpc0FkZGVkIiwiQm9vbGVhbiIsInRvZ2dsZSIsImNvbnRhaW5zIiwia2V5cyIsImlzRW1wdHkiLCJkYXRhc2V0IiwicHJvcHMiLCJza2lwQXR0ck5hbWUiLCJ0eXBlIiwiYXJyYXkiLCJjbG9uZUFycmF5IiwiYm94IiwiYXZhaWxhYmxlV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnRBcmVhIiwidG9wQXJlYSIsImhvcml6b250YWwiLCJwcm9wTmFtZSIsImRlZmF1bHRWYWx1ZSIsInNjcm9sbFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJyZXNldEZvcm0iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OzsyekRBQUEsSUFBTUEsRUFBdUIsQ0FDM0JDLEdBQUksZUFDSkMsR0FBSSxhQUNKQyxHQUFJLGlCQUNKQyxHQUFJLG9CQU1PQyxFQUFiLFdBeUNFLFdBQVlDLEksNEZBQVMsU0FDbkIsSUFDRUMsS0FBS0MsU0FBU0YsR0FDZEMsS0FBS0UsbUJBQW1CSCxFQUFRSSxpQkFDaENILEtBQUtJLFdBQVdMLEVBQVFBLFNBQ3hCQyxLQUFLSyxTQUNMTCxLQUFLTSxZQUNMTixLQUFLTyxhQUVEUixFQUFRUyxlQUNWUixLQUFLUyxlQUFlVixFQUFRUyxjQUFlUixLQUFLVSx1QkFFbEQsTUFBT0MsR0FDUEMsUUFBUUMsS0FBUixvQ0FDQUQsUUFBUUUsTUFBTUgsSSxVQXZEcEIsTyxFQUFBLEUsRUFBQSw0QkEyd0RjWixHQUNWLElBQUlnQixFQUFZaEIsRUFBUWlCLElBRXhCLEdBQUtELEVBQUwsQ0FJQSxJQUFJRSxHQUFZLEVBRWhCLEdBQXlCLGlCQUFkRixJQUNUQSxFQUFZRyxT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RG93bk1ldGhvZE1hcHBpbmcgPSB7XHJcbiAgMTM6ICdvbkVudGVyUHJlc3MnLFxyXG4gIDI3OiAnb25Fc2NQcmVzcycsXHJcbiAgMzg6ICdvblVwQXJyb3dQcmVzcycsXHJcbiAgNDA6ICdvbkRvd25BcnJvd1ByZXNzJyxcclxufTtcclxuXHJcbmNvbnN0IHZpcnR1YWxTZWxlY3RWZXJzaW9uID0gJ3YxLjAuNSc7XHJcblxyXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIFZpcnR1YWxTZWxlY3QgKi9cclxuZXhwb3J0IGNsYXNzIFZpcnR1YWxTZWxlY3Qge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIFZpcnR1YWxTZWxlY3RcclxuICAgKiBAcHJvcGVydHkgeyhlbGVtZW50fHN0cmluZyl9IGVsZSAtIFBhcmVudCBlbGVtZW50IHRvIHJlbmRlciBWaXJ0dWFsU2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gb3B0aW9ucyAtIEFycmF5IG9mIG9iamVjdCB0byBzaG93IGFzIG9wdGlvbnNcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLnZhbHVlIC0gVmFsdWUgb2YgdGhlIG9wdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10ubGFiZWwgLSBEaXNwbGF5IHRleHQgb2YgdGhlIG9wdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10uZGVzY3JpcHRpb24gLSBUZXh0IHRvIHNob3cgYWxvbmcgd2l0aCBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xhcnJheSl9IG9wdGlvbnNbXS5hbGlhcyAtIEFsdGVybmF0aXZlIGxhYmVscyB0byB1c2Ugb24gc2VhcmNoLiBBcnJheSBvZiBzdHJpbmcgb3IgY29tbWEgc2VwYXJhdGVkIHN0cmluZy5cclxuICAgKiBAcHJvcGVydHkge2FycmF5fSBvcHRpb25zW10ub3B0aW9ucyAtIExpc3Qgb2Ygb3B0aW9ucyBmb3Igb3B0aW9uIGdyb3VwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt2YWx1ZUtleT12YWx1ZV0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgdmFsdWUgZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtsYWJlbEtleT1sYWJlbF0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgbGFiZWwgZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtkZXNjcmlwdGlvbktleT1kZXNjcmlwdGlvbl0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgZGVzY3JpcHRpb24gZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthbGlhc0tleT1hbGlhc10gLSBLZXkgbmFtZSB0byBnZXQgYWxpYXMgZnJvbSBvcHRpb25zIG9iamVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW211bHRpcGxlPWZhbHNlXSAtIEVuYWJsZSBtdWx0aXNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NlYXJjaD1mYWxzZV0gLSBFbmFibGUgc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGlkZUNsZWFyQnV0dG9uPWZhbHNlXSAtIEhpZGUgY2xlYXIgYnV0dG9uXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGFzT3B0aW9uRGVzY3JpcHRpb249ZmFsc2VdIC0gSGFzIGRlc2NyaXB0aW9uIHRvIHNob3cgYWxvbmcgd2l0aCBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVTZWxlY3RBbGw9ZmFsc2VdIC0gRGlzYWJsZSBzZWxlY3QgYWxsIGZlYXR1cmUgb2YgbXVsdGlwbGUgc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtvcHRpb25zQ291bnQ9NXw0XSAtIE5vLm9mIG9wdGlvbnMgdG8gc2hvdyBvbiB2aWV3cG9ydFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbb3B0aW9uSGVpZ2h0PTQwcHh8NjBweF0gLSBIZWlnaHQgb2YgZWFjaCBkcm9wZG93biBvcHRpb25zXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwb3NpdGlvbj1hdXRvXSAtIFBvc2l0aW9uIG9mIGRyb3Bib3ggKHRvcCwgYm90dG9tLCBhdXRvKVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGxhY2Vob2xkZXI9U2VsZWN0XSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIG9wdGlvbnMgc2VsZWN0ZWRcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vT3B0aW9uc1RleHQ9Tm8gb3B0aW9ucyBmb3VuZF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyBvcHRpb25zIHRvIHNob3dcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vU2VhcmNoUmVzdWx0c1RleHQ9Tm8gcmVzdWx0cyBmb3VuZF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyByZXN1bHRzIG9uIHNlYXJjaFxyXG4gICAqIEBwcm9wZXJ0eSB7YXJyYXl9IFtkaXNhYmxlZE9wdGlvbnNdIC0gT3B0aW9ucyB0byBkaXNhYmxlIChhcnJheSBvZiB2YWx1ZXMpXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfGFycmF5KX0gW3NlbGVjdGVkVmFsdWVdIC0gU2luZ2xlIHZhbHVlIG9yIGFycmF5IG9mIHZhbHVlcyB0byBzZWxlY3Qgb24gaW5pdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NpbGVudEluaXRpYWxWYWx1ZVNldD1mYWxzZV0gLSBUbyBhdm9pZCBcImNoYW5nZSBldmVudFwiIHRyaWdnZXIgb24gc2V0dGluZyBpbml0aWFsIHZhbHVlXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtkcm9wYm94V2lkdGhdIC0gQ3VzdG9tIHdpZHRoIGZvciBkcm9wYm94XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXg9MV0gLSBDU1Mgei1pbmRleCB2YWx1ZSBmb3IgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbm9PZkRpc3BsYXlWYWx1ZXM9NTBdIC0gTWF4aW11bSBuby5vZiB2YWx1ZXMgdG8gc2hvdyBpbiB0aGUgdG9vbHRpcCBmb3IgbXVsdGktc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYWxsb3dOZXdPcHRpb249ZmFsc2VdIC0gQWxsb3cgdG8gYWRkIG5ldyBvcHRpb24gYnkgc2VhcmNoaW5nXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbbWFya1NlYXJjaFJlc3VsdHM9ZmFsc2VdIC0gTWFyayBtYXRjaGVkIHRlcm0gaW4gbGFiZWxcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rvb2x0aXBGb250U2l6ZT0xNHB4XSAtIEZvbnQgc2l6ZSBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdG9vbHRpcEFsaWdubWVudD1jZW50ZXJdIC0gQ1NTIFRleHQgYWxpZ25tZW50IGZvciB0b29sdGlwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b29sdGlwTWF4V2lkdGg9MzAwcHhdIC0gQ1NTIG1heCB3aWR0aCBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dTZWxlY3RlZE9wdGlvbnNGaXJzdD1mYWxzZV0gLSBTaG93IHNlbGVjdGVkIG9wdGlvbnMgYXQgdGhlIHRvcCBvZiB0aGUgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbmFtZV0gLSBOYW1lIGF0dHJpYnV0ZSBmb3IgaGlkZGVuIGlucHV0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBba2VlcEFsd2F5c09wZW5dIC0gS2VlcCBkcm9wYm94IGFsd2F5cyBvcGVuIHdpdGggZml4ZWQgaGVpZ2h0XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhWYWx1ZXM9MF0gLSBNYXhpbXVtIG5vLm9mIG9wdGlvbnMgYWxsb3dlZCB0byBjaG9vc2UgaW4gbXVsdGlwbGUgc2VsZWN0XHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5zZXRQcm9wcyhvcHRpb25zKTtcclxuICAgICAgdGhpcy5zZXREaXNhYmxlZE9wdGlvbnMob3B0aW9ucy5kaXNhYmxlZE9wdGlvbnMpO1xyXG4gICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucy5vcHRpb25zKTtcclxuICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgdGhpcy5hZGRFdmVudHMoKTtcclxuICAgICAgdGhpcy5zZXRNZXRob2RzKCk7XHJcblxyXG4gICAgICBpZiAob3B0aW9ucy5zZWxlY3RlZFZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZU1ldGhvZChvcHRpb25zLnNlbGVjdGVkVmFsdWUsIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0KTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkbid0IGluaXRpYXRlIFZpcnR1YWwgU2VsZWN0YCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogcmVuZGVyIG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHJlbmRlcigpIHtcclxuICAgIGlmICghdGhpcy4kZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgd3JhcHBlckNsYXNzZXMgPSAndnNjb21wLXdyYXBwZXInO1xyXG4gICAgbGV0IHZhbHVlVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCcnLCAhdGhpcy5tdWx0aXBsZSwgdHJ1ZSk7XHJcbiAgICBsZXQgY2xlYXJCdXR0b25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJ0NsZWFyJyk7XHJcbiAgICBsZXQgb3B0aW9uc0hlaWdodCA9IHRoaXMub3B0aW9uc0hlaWdodDtcclxuICAgIGxldCByZXF1aXJlZCA9ICcnO1xyXG4gICAgbGV0IG5vT3B0aW9uU3R5bGUgPSB7fTtcclxuICAgIGxldCBvcHRpb25zU3R5bGUgPSB7XHJcbiAgICAgICdtYXgtaGVpZ2h0Jzogb3B0aW9uc0hlaWdodCxcclxuICAgIH07XHJcblxyXG4gICAgbGV0IGRyb3Bib3hTdHlsZSA9IHtcclxuICAgICAgJ3otaW5kZXgnOiB0aGlzLnpJbmRleCxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHRoaXMuZHJvcGJveFdpZHRoKSB7XHJcbiAgICAgIGRyb3Bib3hTdHlsZS53aWR0aCA9IHRoaXMuZHJvcGJveFdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIHdyYXBwZXJDbGFzc2VzICs9ICcgbXVsdGlwbGUnO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIGhhcy1zZWxlY3QtYWxsJztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJykge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIHBvc2l0aW9uLXRvcCc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmhpZGVDbGVhckJ1dHRvbikge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIGhhcy1jbGVhci1idXR0b24nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnJlcXVpcmVkKSB7XHJcbiAgICAgIHJlcXVpcmVkID0gJ3JlcXVpcmVkJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3Blbikge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIGtlZXAtYWx3YXlzLW9wZW4gb3BlbmVkJztcclxuICAgICAgb3B0aW9uc1N0eWxlLmhlaWdodCA9IG9wdGlvbnNIZWlnaHQ7XHJcbiAgICAgIG5vT3B0aW9uU3R5bGUuaGVpZ2h0ID0gb3B0aW9uc0hlaWdodDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdyYXBwZXJDbGFzc2VzICs9ICcgY2xvc2VkJztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaHRtbCA9IGA8ZGl2IGNsYXNzPVwiJHt3cmFwcGVyQ2xhc3Nlc31cIiB0YWJpbmRleD1cIjBcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiJHt0aGlzLm5hbWV9XCIgY2xhc3M9XCJ2c2NvbXAtaGlkZGVuLWlucHV0XCIgJHtyZXF1aXJlZH0+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC10b2dnbGUtYnV0dG9uXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLXZhbHVlXCIgJHt2YWx1ZVRvb2x0aXB9PlxyXG4gICAgICAgICAgICAke3RoaXMucGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtYXJyb3dcIj48L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtY2xlYXItYnV0dG9uIHRvZ2dsZS1idXR0b24tY2hpbGRcIiAke2NsZWFyQnV0dG9uVG9vbHRpcH0+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWRyb3Bib3hcIiAke3RoaXMuZ2V0U3R5bGVUZXh0KGRyb3Bib3hTdHlsZSl9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtd3JhcHBlclwiPjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zLWNvbnRhaW5lclwiICR7dGhpcy5nZXRTdHlsZVRleHQob3B0aW9uc1N0eWxlKX0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1saXN0XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zXCI+PC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW5vLW9wdGlvbnNcIiAke3RoaXMuZ2V0U3R5bGVUZXh0KG5vT3B0aW9uU3R5bGUpfT4ke3RoaXMubm9PcHRpb25zVGV4dH08L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtbm8tc2VhcmNoLXJlc3VsdHNcIiAke3RoaXMuZ2V0U3R5bGVUZXh0KG5vT3B0aW9uU3R5bGUpfT4ke3RoaXMubm9TZWFyY2hSZXN1bHRzVGV4dH08L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICB0aGlzLiRlbGUuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHRoaXMuJHdyYXBwZXIgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiR0b2dnbGVCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC10b2dnbGUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLiRjbGVhckJ1dHRvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLWNsZWFyLWJ1dHRvbicpO1xyXG4gICAgdGhpcy4kZHJvcGJveCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLWRyb3Bib3gnKTtcclxuICAgIHRoaXMuJHNlYXJjaCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucy1jb250YWluZXInKTtcclxuICAgIHRoaXMuJG9wdGlvbnNMaXN0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucy1saXN0Jyk7XHJcbiAgICB0aGlzLiRvcHRpb25zID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucycpO1xyXG4gICAgdGhpcy4kdmFsdWVUZXh0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtdmFsdWUnKTtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtaGlkZGVuLWlucHV0Jyk7XHJcblxyXG4gICAgdGhpcy4kZWxlLnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMubmFtZSk7XHJcblxyXG4gICAgdGhpcy5hZGRDbGFzcyh0aGlzLiRlbGUsICd2c2NvbXAtZWxlJyk7XHJcbiAgICB0aGlzLnJlbmRlclNlYXJjaCgpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJPcHRpb25zKCkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIGxldCBjaGVja2JveEh0bWwgPSAnJztcclxuICAgIGxldCBuZXdPcHRpb25JY29uSHRtbCA9ICcnO1xyXG4gICAgbGV0IG1hcmtTZWFyY2hSZXN1bHRzID0gKHRoaXMubWFya1NlYXJjaFJlc3VsdHMgJiYgdGhpcy5zZWFyY2hWYWx1ZSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICBsZXQgc2VhcmNoUmVnZXg7XHJcblxyXG4gICAgbGV0IHN0eWxlVGV4dCA9IHRoaXMuZ2V0U3R5bGVUZXh0KHtcclxuICAgICAgaGVpZ2h0OiB0aGlzLm9wdGlvbkhlaWdodCArICdweCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobWFya1NlYXJjaFJlc3VsdHMpIHtcclxuICAgICAgc2VhcmNoUmVnZXggPSBuZXcgUmVnRXhwKGAoJHt0aGlzLnNlYXJjaFZhbHVlfSlgLCAnZ2knKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSAnPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uXCI+PC9zcGFuPic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgbGV0IG5ld09wdGlvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnTmV3IE9wdGlvbicpO1xyXG4gICAgICBuZXdPcHRpb25JY29uSHRtbCA9IGA8c3BhbiBjbGFzcz1cInZzY29tcC1uZXctb3B0aW9uLWljb25cIiAke25ld09wdGlvblRvb2x0aXB9Pjwvc3Bhbj5gO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2libGVPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IG9wdGlvbkxhYmVsID0gZC5sYWJlbDtcclxuICAgICAgbGV0IG9wdGlvbkNsYXNzZXMgPSAndnNjb21wLW9wdGlvbic7XHJcbiAgICAgIGxldCBvcHRpb25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJycsIHRydWUpO1xyXG4gICAgICBsZXQgbGVmdFNlY3Rpb24gPSBjaGVja2JveEh0bWw7XHJcbiAgICAgIGxldCByaWdodFNlY3Rpb24gPSAnJztcclxuICAgICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcblxyXG4gICAgICBpZiAoZC5pc0ZvY3VzZWQpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZm9jdXNlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzRGlzYWJsZWQpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZGlzYWJsZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZ3JvdXAtdGl0bGUnO1xyXG4gICAgICAgIGxlZnRTZWN0aW9uID0gJyc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGQuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIHNlbGVjdGVkJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBPcHRpb24pIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZ3JvdXAtb3B0aW9uJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuZGVzY3JpcHRpb24pIHtcclxuICAgICAgICBkZXNjcmlwdGlvbiA9IGA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbi1kZXNjcmlwdGlvblwiICR7b3B0aW9uVG9vbHRpcH0+JHtkLmRlc2NyaXB0aW9ufTwvZGl2PmA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBjdXJyZW50LW5ldyc7XHJcbiAgICAgICAgcmlnaHRTZWN0aW9uICs9IG5ld09wdGlvbkljb25IdG1sO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChtYXJrU2VhcmNoUmVzdWx0cyAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICAgIG9wdGlvbkxhYmVsID0gb3B0aW9uTGFiZWwucmVwbGFjZShzZWFyY2hSZWdleCwgJzxtYXJrPiQxPC9tYXJrPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cIiR7b3B0aW9uQ2xhc3Nlc31cIiBkYXRhLXZhbHVlPVwiJHtkLnZhbHVlfVwiIGRhdGEtaW5kZXg9XCIke2QuaW5kZXh9XCIgZGF0YS12aXNpYmxlLWluZGV4PVwiJHtkLnZpc2libGVJbmRleH1cIiAke3N0eWxlVGV4dH0+XHJcbiAgICAgICAgICAke2xlZnRTZWN0aW9ufVxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtb3B0aW9uLXRleHRcIiAke29wdGlvblRvb2x0aXB9PlxyXG4gICAgICAgICAgICAke29wdGlvbkxhYmVsfVxyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgJHtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgICR7cmlnaHRTZWN0aW9ufVxyXG4gICAgICAgIDwvZGl2PmA7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLiRvcHRpb25zLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICBsZXQgaGFzTm9PcHRpb25zID0gIXRoaXMub3B0aW9ucy5sZW5ndGg7XHJcbiAgICBsZXQgaGFzTm9TZWFyY2hSZXN1bHRzID0gIWhhc05vT3B0aW9ucyAmJiAhdmlzaWJsZU9wdGlvbnMubGVuZ3RoO1xyXG5cclxuICAgIGlmICghdGhpcy5hbGxvd05ld09wdGlvbikge1xyXG4gICAgICB0aGlzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtbm8tc2VhcmNoLXJlc3VsdHMnLCBoYXNOb1NlYXJjaFJlc3VsdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy1uby1vcHRpb25zJywgaGFzTm9PcHRpb25zKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc1Bvc2l0aW9uKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNUb29sdGlwKCk7XHJcbiAgICB0aGlzLm1vdmVGb2N1c2VkT3B0aW9uVG9WaWV3KCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJTZWFyY2goKSB7XHJcbiAgICBpZiAoIXRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY2hlY2tib3hIdG1sID0gJyc7XHJcblxyXG4gICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSAnPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uIHRvZ2dsZS1hbGwtb3B0aW9uc1wiPjwvc3Bhbj4nO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICR7Y2hlY2tib3hIdG1sfVxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidnNjb21wLXNlYXJjaC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoLi4uXCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNsZWFyXCI+JnRpbWVzOzwvc3Bhbj5cclxuICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICB0aGlzLiRzZWFyY2guaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHRoaXMuJHNlYXJjaElucHV0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLWlucHV0Jyk7XHJcbiAgICB0aGlzLiRzZWFyY2hDbGVhciA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC1jbGVhcicpO1xyXG4gICAgdGhpcy4kdG9nZ2xlQWxsT3B0aW9ucyA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlLWFsbC1vcHRpb25zJyk7XHJcblxyXG4gICAgaWYgKHRoaXMuc2VhcmNoRnJvbUFwaSkge1xyXG4gICAgICAvLyB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kc2VhcmNoSW5wdXQsICdrZXl1cCBjaGFuZ2UnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kc2VhcmNoSW5wdXQsICdrZXl1cCBjaGFuZ2UnLCAnb25TZWFyY2gnKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHNlYXJjaENsZWFyLCAnY2xpY2snLCAnb25TZWFyY2hDbGVhcicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR0b2dnbGVBbGxPcHRpb25zLCAnY2xpY2snLCAnb25Ub2dnbGVBbGxPcHRpb25zJyk7XHJcbiAgfVxyXG4gIC8qKiByZW5kZXIgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogZXZlbnQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYWRkRXZlbnRzKCkge1xyXG4gICAgdGhpcy5hZGRFdmVudChkb2N1bWVudCwgJ2NsaWNrJywgJ29uRG9jdW1lbnRDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR3cmFwcGVyLCAna2V5ZG93bicsICdvbktleURvd24nKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kdG9nZ2xlQnV0dG9uLCAnY2xpY2snLCAnb25Ub2dnbGVCdXR0b25DbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRjbGVhckJ1dHRvbiwgJ2NsaWNrJywgJ29uQ2xlYXJCdXR0b25DbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zQ29udGFpbmVyLCAnc2Nyb2xsJywgJ29uT3B0aW9uc1Njcm9sbCcpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAnY2xpY2snLCAnb25PcHRpb25zQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ21vdXNlb3ZlcicsICdvbk9wdGlvbnNNb3VzZU92ZXInKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ3RvdWNobW92ZScsICdvbk9wdGlvbnNUb3VjaE1vdmUnKTtcclxuICB9XHJcblxyXG4gIGFkZEV2ZW50KCRlbGUsIGV2ZW50cywgbWV0aG9kKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50cyA9IHRoaXMucmVtb3ZlQXJyYXlFbXB0eShldmVudHMuc3BsaXQoJyAnKSk7XHJcblxyXG4gICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XHJcbiAgICAgIGxldCBldmVudHNLZXkgPSBgJHttZXRob2R9LSR7ZXZlbnR9YDtcclxuICAgICAgbGV0IGNhbGxiYWNrID0gdGhpcy5ldmVudHNbZXZlbnRzS2V5XTtcclxuXHJcbiAgICAgIGlmICghY2FsbGJhY2spIHtcclxuICAgICAgICBjYWxsYmFjayA9IHRoaXNbbWV0aG9kXS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50c0tleV0gPSBjYWxsYmFjaztcclxuICAgICAgfVxyXG5cclxuICAgICAgJGVsZSA9IHRoaXMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgICAkZWxlLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzcGF0Y2hFdmVudCgkZWxlLCBldmVudE5hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZSA9IHRoaXMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICRlbGUuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChldmVudE5hbWUsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBvbkRvY3VtZW50Q2xpY2soZSkge1xyXG4gICAgVmlydHVhbFNlbGVjdC5jbG9zZUFsbERyb3Bib3goZS50YXJnZXQuY2xvc2VzdCgnLnZzY29tcC13cmFwcGVyJykpO1xyXG4gIH1cclxuXHJcbiAgb25LZXlEb3duKGUpIHtcclxuICAgIGxldCBrZXkgPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcclxuICAgIGxldCBtZXRob2QgPSBrZXlEb3duTWV0aG9kTWFwcGluZ1trZXldO1xyXG5cclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgdGhpc1ttZXRob2RdKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25FbnRlclByZXNzKCkge1xyXG4gICAgaWYgKCF0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RGb2N1c2VkT3B0aW9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkVzY1ByZXNzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Eb3duQXJyb3dQcmVzcyhlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKCduZXh0Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblVwQXJyb3dQcmVzcyhlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKCdwcmV2aW91cycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ub2dnbGVCdXR0b25DbGljayhlKSB7XHJcbiAgICBsZXQgY2hpbGRFbGUgPSBlLnRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLWJ1dHRvbi1jaGlsZCcpO1xyXG5cclxuICAgIGlmIChjaGlsZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVEcm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBvbkNsZWFyQnV0dG9uQ2xpY2soKSB7XHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNTY3JvbGwoKSB7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNDbGljayhlKSB7XHJcbiAgICB0aGlzLnNlbGVjdE9wdGlvbihlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLW9wdGlvbjpub3QoLmRpc2FibGVkKTpub3QoLmdyb3VwLXRpdGxlKScpKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc01vdXNlT3ZlcihlKSB7XHJcbiAgICBsZXQgJGVsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtb3B0aW9uOm5vdCguZGlzYWJsZWQpOm5vdCguZ3JvdXAtdGl0bGUpJyk7XHJcblxyXG4gICAgaWYgKCRlbGUpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbihudWxsLCAkZWxlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc1RvdWNoTW92ZSgpIHtcclxuICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuICB9XHJcblxyXG4gIG9uU2VhcmNoKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLnNldFNlYXJjaFZhbHVlKGUudGFyZ2V0LnZhbHVlLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIG9uU2VhcmNoQ2xlYXIoKSB7XHJcbiAgICB0aGlzLnNldFNlYXJjaFZhbHVlKCcnKTtcclxuICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gIH1cclxuXHJcbiAgb25Ub2dnbGVBbGxPcHRpb25zKCkge1xyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zKCk7XHJcbiAgfVxyXG4gIC8qKiBldmVudCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBzZXQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgc2V0UHJvcHMob3B0aW9ucykge1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc2V0RGVmYXVsdFByb3BzKG9wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXRQcm9wc0Zyb21FbGVtZW50QXR0cihvcHRpb25zKTtcclxuXHJcbiAgICB0aGlzLiRlbGUgPSBvcHRpb25zLmVsZTtcclxuICAgIHRoaXMudmFsdWVLZXkgPSBvcHRpb25zLnZhbHVlS2V5O1xyXG4gICAgdGhpcy5sYWJlbEtleSA9IG9wdGlvbnMubGFiZWxLZXk7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uS2V5ID0gb3B0aW9ucy5kZXNjcmlwdGlvbktleTtcclxuICAgIHRoaXMuYWxpYXNLZXkgPSBvcHRpb25zLmFsaWFzS2V5O1xyXG4gICAgdGhpcy5vcHRpb25zQ291bnQgPSBwYXJzZUludChvcHRpb25zLm9wdGlvbnNDb3VudCk7XHJcbiAgICB0aGlzLmhhbGZPcHRpb25zQ291bnQgPSBNYXRoLmNlaWwodGhpcy5vcHRpb25zQ291bnQgLyAyKTtcclxuICAgIHRoaXMub3B0aW9uSGVpZ2h0VGV4dCA9IG9wdGlvbnMub3B0aW9uSGVpZ2h0O1xyXG4gICAgdGhpcy5vcHRpb25IZWlnaHQgPSBwYXJzZUZsb2F0KHRoaXMub3B0aW9uSGVpZ2h0VGV4dCk7XHJcbiAgICB0aGlzLm11bHRpcGxlID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMubXVsdGlwbGUpO1xyXG4gICAgdGhpcy5oYXNTZWFyY2ggPSB0aGlzLmNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5zZWFyY2gpO1xyXG4gICAgdGhpcy5oaWRlQ2xlYXJCdXR0b24gPSB0aGlzLmNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5oaWRlQ2xlYXJCdXR0b24pO1xyXG4gICAgdGhpcy5oYXNPcHRpb25EZXNjcmlwdGlvbiA9IHRoaXMuY29udmVydFRvQm9vbGVhbihvcHRpb25zLmhhc09wdGlvbkRlc2NyaXB0aW9uKTtcclxuICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0ID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2lsZW50SW5pdGlhbFZhbHVlU2V0KTtcclxuICAgIHRoaXMuYWxsb3dOZXdPcHRpb24gPSB0aGlzLmNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5hbGxvd05ld09wdGlvbik7XHJcbiAgICB0aGlzLm1hcmtTZWFyY2hSZXN1bHRzID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMubWFya1NlYXJjaFJlc3VsdHMpO1xyXG4gICAgdGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QgPSB0aGlzLmNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QpO1xyXG4gICAgdGhpcy5kaXNhYmxlU2VsZWN0QWxsID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuZGlzYWJsZVNlbGVjdEFsbCk7XHJcbiAgICB0aGlzLmtlZXBBbHdheXNPcGVuID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMua2VlcEFsd2F5c09wZW4pO1xyXG4gICAgdGhpcy5ub09wdGlvbnNUZXh0ID0gb3B0aW9ucy5ub09wdGlvbnNUZXh0O1xyXG4gICAgdGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0ID0gb3B0aW9ucy5ub1NlYXJjaFJlc3VsdHNUZXh0O1xyXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IG9wdGlvbnMucGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbjtcclxuICAgIHRoaXMuZHJvcGJveFdpZHRoID0gb3B0aW9ucy5kcm9wYm94V2lkdGg7XHJcbiAgICB0aGlzLnRvb2x0aXBGb250U2l6ZSA9IG9wdGlvbnMudG9vbHRpcEZvbnRTaXplO1xyXG4gICAgdGhpcy50b29sdGlwQWxpZ25tZW50ID0gb3B0aW9ucy50b29sdGlwQWxpZ25tZW50O1xyXG4gICAgdGhpcy50b29sdGlwTWF4V2lkdGggPSBvcHRpb25zLnRvb2x0aXBNYXhXaWR0aDtcclxuICAgIHRoaXMubm9PZkRpc3BsYXlWYWx1ZXMgPSBwYXJzZUludChvcHRpb25zLm5vT2ZEaXNwbGF5VmFsdWVzKTtcclxuICAgIHRoaXMuekluZGV4ID0gcGFyc2VJbnQob3B0aW9ucy56SW5kZXgpO1xyXG4gICAgdGhpcy5tYXhWYWx1ZXMgPSBwYXJzZUludChvcHRpb25zLm1heFZhbHVlcyk7XHJcbiAgICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWU7XHJcbiAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICB0aGlzLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgIHRoaXMudG9vbHRpcEVudGVyRGVsYXkgPSAyMDA7XHJcbiAgICB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbiA9IDI1MDtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWUgPSAnJztcclxuICAgIHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCA9ICcnO1xyXG4gICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmlzU2hvd0FsbFNlbGVjdGVkVGV4dCA9IG9wdGlvbnMuaXNTaG93QWxsU2VsZWN0ZWRUZXh0IHx8IGZhbHNlO1xyXG4gICAgdGhpcy5zZWFyY2hGcm9tQXBpID0gb3B0aW9ucy5zZWFyY2hGcm9tQXBpIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5yZXF1aXJlZCA9IG9wdGlvbnMucmVxdWlyZWQgfHwgZmFsc2U7XHJcbiAgICB0aGlzLm9wdGlvbnNIZWlnaHQgPSB0aGlzLm9wdGlvbnNDb3VudCAqIHRoaXMub3B0aW9uSGVpZ2h0ICsgJ3B4JztcclxuXHJcbiAgICBpZiAoKG9wdGlvbnMuc2VhcmNoID09PSB1bmRlZmluZWQgJiYgdGhpcy5tdWx0aXBsZSkgfHwgdGhpcy5hbGxvd05ld09wdGlvbikge1xyXG4gICAgICB0aGlzLmhhc1NlYXJjaCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubWF4VmFsdWVzKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZVNlbGVjdEFsbCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXREZWZhdWx0UHJvcHMob3B0aW9ucykge1xyXG4gICAgbGV0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICB2YWx1ZUtleTogJ3ZhbHVlJyxcclxuICAgICAgbGFiZWxLZXk6ICdsYWJlbCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uS2V5OiAnZGVzY3JpcHRpb24nLFxyXG4gICAgICBhbGlhc0tleTogJ2FsaWFzJyxcclxuICAgICAgb3B0aW9uc0NvdW50OiA1LFxyXG4gICAgICBub09mRGlzcGxheVZhbHVlczogNTAsXHJcbiAgICAgIG9wdGlvbkhlaWdodDogJzQwcHgnLFxyXG4gICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgIGhpZGVDbGVhckJ1dHRvbjogZmFsc2UsXHJcbiAgICAgIGhhc09wdGlvbkRlc2NyaXB0aW9uOiBmYWxzZSxcclxuICAgICAgc2lsZW50SW5pdGlhbFZhbHVlU2V0OiBmYWxzZSxcclxuICAgICAgZGlzYWJsZVNlbGVjdEFsbDogZmFsc2UsXHJcbiAgICAgIG5vT3B0aW9uc1RleHQ6ICdObyBvcHRpb25zIGZvdW5kJyxcclxuICAgICAgbm9TZWFyY2hSZXN1bHRzVGV4dDogJ05vIHJlc3VsdHMgZm91bmQnLFxyXG4gICAgICBwbGFjZWhvbGRlcjogJ1NlbGVjdCcsXHJcbiAgICAgIHBvc2l0aW9uOiAnYXV0bycsXHJcbiAgICAgIHpJbmRleDogMSxcclxuICAgICAgYWxsb3dOZXdPcHRpb246IGZhbHNlLFxyXG4gICAgICBtYXJrU2VhcmNoUmVzdWx0czogZmFsc2UsXHJcbiAgICAgIHRvb2x0aXBGb250U2l6ZTogJzE0cHgnLFxyXG4gICAgICB0b29sdGlwQWxpZ25tZW50OiAnY2VudGVyJyxcclxuICAgICAgdG9vbHRpcE1heFdpZHRoOiAnMzAwcHgnLFxyXG4gICAgICBzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3Q6IGZhbHNlLFxyXG4gICAgICBuYW1lOiAnJyxcclxuICAgICAga2VlcEFsd2F5c09wZW46IGZhbHNlLFxyXG4gICAgICBtYXhWYWx1ZXM6IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChvcHRpb25zLmhhc09wdGlvbkRlc2NyaXB0aW9uKSB7XHJcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9wdGlvbnNDb3VudCA9IDQ7XHJcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9wdGlvbkhlaWdodCA9ICc2MHB4JztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9wc0Zyb21FbGVtZW50QXR0cihvcHRpb25zKSB7XHJcbiAgICBsZXQgJGVsZSA9IG9wdGlvbnMuZWxlO1xyXG4gICAgbGV0IG1hcHBpbmcgPSB7XHJcbiAgICAgIG11bHRpcGxlOiAnbXVsdGlwbGUnLFxyXG4gICAgICBwbGFjZWhvbGRlcjogJ3BsYWNlaG9sZGVyJyxcclxuICAgICAgbmFtZTogJ25hbWUnLFxyXG4gICAgICAnZGF0YS12YWx1ZS1rZXknOiAndmFsdWVLZXknLFxyXG4gICAgICAnZGF0YS1sYWJlbC1rZXknOiAnbGFiZWxLZXknLFxyXG4gICAgICAnZGF0YS1kZXNjcmlwdGlvbi1rZXknOiAnZGVzY3JpcHRpb25LZXknLFxyXG4gICAgICAnZGF0YS1hbGlhcy1rZXknOiAnYWxpYXNLZXknLFxyXG4gICAgICAnZGF0YS1zZWFyY2gnOiAnc2VhcmNoJyxcclxuICAgICAgJ2RhdGEtaGlkZS1jbGVhci1idXR0b24nOiAnaGlkZUNsZWFyQnV0dG9uJyxcclxuICAgICAgJ2RhdGEtaGFzLW9wdGlvbi1kZXNjcmlwdGlvbic6ICdoYXNPcHRpb25EZXNjcmlwdGlvbicsXHJcbiAgICAgICdkYXRhLW9wdGlvbnMtY291bnQnOiAnb3B0aW9uc0NvdW50JyxcclxuICAgICAgJ2RhdGEtb3B0aW9uLWhlaWdodCc6ICdvcHRpb25IZWlnaHQnLFxyXG4gICAgICAnZGF0YS1wb3NpdGlvbic6ICdwb3NpdGlvbicsXHJcbiAgICAgICdkYXRhLW5vLW9wdGlvbnMtdGV4dCc6ICdub09wdGlvbnNUZXh0JyxcclxuICAgICAgJ2RhdGEtbm8tc2VhcmNoLXJlc3VsdHMtdGV4dCc6ICdub1NlYXJjaFJlc3VsdHNUZXh0JyxcclxuICAgICAgJ2RhdGEtc2lsZW50LWluaXRpYWwtdmFsdWUtc2V0JzogJ3NpbGVudEluaXRpYWxWYWx1ZVNldCcsXHJcbiAgICAgICdkYXRhLWRyb3Bib3gtd2lkdGgnOiAnZHJvcGJveFdpZHRoJyxcclxuICAgICAgJ2RhdGEtei1pbmRleCc6ICd6SW5kZXgnLFxyXG4gICAgICAnZGF0YS1uby1vZi1kaXNwbGF5LXZhbHVlcyc6ICdub09mRGlzcGxheVZhbHVlcycsXHJcbiAgICAgICdkYXRhLWFsbG93LW5ldy1vcHRpb24nOiAnYWxsb3dOZXdPcHRpb24nLFxyXG4gICAgICAnZGF0YS1tYXJrLXNlYXJjaC1yZXN1bHRzJzogJ21hcmtTZWFyY2hSZXN1bHRzJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1mb250LXNpemUnOiAndG9vbHRpcEZvbnRTaXplJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1hbGlnbm1lbnQnOiAndG9vbHRpcEFsaWdubWVudCcsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtbWF4LXdpZHRoJzogJ3Rvb2x0aXBNYXhXaWR0aCcsXHJcbiAgICAgICdkYXRhLXNob3ctc2VsZWN0ZWQtb3B0aW9ucy1maXJzdCc6ICdzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QnLFxyXG4gICAgICAnZGF0YS1kaXNhYmxlLXNlbGVjdC1hbGwnOiAnZGlzYWJsZVNlbGVjdEFsbCcsXHJcbiAgICAgICdkYXRhLWtlZXAtYWx3YXlzLW9wZW4nOiAna2VlcEFsd2F5c09wZW4nLFxyXG4gICAgICAnZGF0YS1tYXgtdmFsdWVzJzogJ21heFZhbHVlcycsXHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAobGV0IGsgaW4gbWFwcGluZykge1xyXG4gICAgICBsZXQgdmFsdWUgPSAkZWxlLmdldEF0dHJpYnV0ZShrKTtcclxuXHJcbiAgICAgIGlmIChrID09PSAnbXVsdGlwbGUnICYmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09ICd0cnVlJykpIHtcclxuICAgICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIG9wdGlvbnNbbWFwcGluZ1trXV0gPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0TWV0aG9kcygpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kZWxlO1xyXG4gICAgJGVsZS52aXJ0dWFsU2VsZWN0ID0gdGhpcztcclxuICAgICRlbGUudmFsdWUgPSB0aGlzLm11bHRpcGxlID8gW10gOiAnJztcclxuICAgICRlbGUucmVzZXQgPSBWaXJ0dWFsU2VsZWN0LnJlc2V0O1xyXG4gICAgJGVsZS5zZXRWYWx1ZSA9IFZpcnR1YWxTZWxlY3Quc2V0VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLnNldE9wdGlvbnMgPSBWaXJ0dWFsU2VsZWN0LnNldE9wdGlvbnNNZXRob2Q7XHJcbiAgICAkZWxlLnNldERpc2FibGVkT3B0aW9ucyA9IFZpcnR1YWxTZWxlY3Quc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kO1xyXG4gICAgJGVsZS50b2dnbGVTZWxlY3RBbGwgPSBWaXJ0dWFsU2VsZWN0LnRvZ2dsZVNlbGVjdEFsbDtcclxuICAgICRlbGUuaXNBbGxTZWxlY3RlZCA9IFZpcnR1YWxTZWxlY3QuaXNBbGxTZWxlY3RlZDtcclxuICAgICRlbGUuYWRkT3B0aW9uID0gVmlydHVhbFNlbGVjdC5hZGRPcHRpb25NZXRob2Q7XHJcbiAgICAkZWxlLmdldE5ld1ZhbHVlID0gVmlydHVhbFNlbGVjdC5nZXROZXdWYWx1ZU1ldGhvZDtcclxuICAgICRlbGUuZ2V0RGlzcGxheVZhbHVlID0gVmlydHVhbFNlbGVjdC5nZXREaXNwbGF5VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLm9wZW4gPSBWaXJ0dWFsU2VsZWN0Lm9wZW5NZXRob2Q7XHJcbiAgICAkZWxlLmNsb3NlID0gVmlydHVhbFNlbGVjdC5jbG9zZU1ldGhvZDtcclxuICB9XHJcblxyXG4gIHNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgdmFsdWUgPSBbdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlID0gdmFsdWUubWFwKCh2KSA9PiB7XHJcbiAgICAgIHJldHVybiB2IHx8IHYgPT0gMCA/IHYudG9TdHJpbmcoKSA6ICcnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHZhbGlkVmFsdWVzID0gW107XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IGlzU2VsZWN0ZWQgPSB2YWx1ZS5pbmRleE9mKGQudmFsdWUpICE9PSAtMTtcclxuXHJcbiAgICAgIGlmIChpc1NlbGVjdGVkICYmICFkLmlzRGlzYWJsZWQgJiYgIWQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgZC5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB2YWxpZFZhbHVlcy5wdXNoKGQudmFsdWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGQuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgdmFsaWRWYWx1ZXMgPSB2YWxpZFZhbHVlc1swXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJlZm9yZVZhbHVlU2V0KCk7XHJcbiAgICB0aGlzLnNldFZhbHVlKHZhbGlkVmFsdWVzLCAhc2lsZW50Q2hhbmdlKTtcclxuICAgIHRoaXMuYWZ0ZXJWYWx1ZVNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICB0aGlzLmFmdGVyU2V0T3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKGRpc2FibGVkT3B0aW9ucykge1xyXG4gICAgdGhpcy5zZXREaXNhYmxlZE9wdGlvbnMoZGlzYWJsZWRPcHRpb25zLCB0cnVlKTtcclxuICAgIHRoaXMuc2V0VmFsdWVNZXRob2QobnVsbCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXREaXNhYmxlZE9wdGlvbnMoZGlzYWJsZWRPcHRpb25zID0gW10sIHNldE9wdGlvbnNQcm9wID0gZmFsc2UpIHtcclxuICAgIGRpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkT3B0aW9ucy5tYXAoKGQpID0+IGQudG9TdHJpbmcoKSk7XHJcbiAgICB0aGlzLmRpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkT3B0aW9ucztcclxuXHJcbiAgICBpZiAoc2V0T3B0aW9uc1Byb3AgJiYgZGlzYWJsZWRPcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICAgIGQuaXNEaXNhYmxlZCA9IGRpc2FibGVkT3B0aW9ucy5pbmRleE9mKGQudmFsdWUpICE9PSAtMTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgb3B0aW9ucyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcmVwYXJlZE9wdGlvbnMgPSBbXTtcclxuICAgIGxldCBkaXNhYmxlZE9wdGlvbnMgPSB0aGlzLmRpc2FibGVkT3B0aW9ucztcclxuICAgIGxldCBoYXNEaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnMubGVuZ3RoO1xyXG4gICAgbGV0IHZhbHVlS2V5ID0gdGhpcy52YWx1ZUtleTtcclxuICAgIGxldCBsYWJlbEtleSA9IHRoaXMubGFiZWxLZXk7XHJcbiAgICBsZXQgZGVzY3JpcHRpb25LZXkgPSB0aGlzLmRlc2NyaXB0aW9uS2V5O1xyXG4gICAgbGV0IGFsaWFzS2V5ID0gdGhpcy5hbGlhc0tleTtcclxuICAgIGxldCBoYXNPcHRpb25EZXNjcmlwdGlvbiA9IHRoaXMuaGFzT3B0aW9uRGVzY3JpcHRpb247XHJcbiAgICBsZXQgZ2V0U3RyaW5nID0gdGhpcy5nZXRTdHJpbmc7XHJcbiAgICBsZXQgZ2V0QWxpYXMgPSB0aGlzLmdldEFsaWFzO1xyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuICAgIGxldCBoYXNPcHRpb25Hcm91cCA9IGZhbHNlO1xyXG5cclxuICAgIGxldCBwcmVwYXJlT3B0aW9uID0gKGQpID0+IHtcclxuICAgICAgbGV0IHZhbHVlID0gZ2V0U3RyaW5nKGRbdmFsdWVLZXldKTtcclxuICAgICAgbGV0IGNoaWxkT3B0aW9ucyA9IGQub3B0aW9ucztcclxuICAgICAgbGV0IGlzR3JvdXBUaXRsZSA9IGNoaWxkT3B0aW9ucyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgbGV0IG9wdGlvbiA9IHtcclxuICAgICAgICBpbmRleCxcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogZ2V0U3RyaW5nKGRbbGFiZWxLZXldKSxcclxuICAgICAgICBhbGlhczogZ2V0QWxpYXMoZFthbGlhc0tleV0pLFxyXG4gICAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBpc0dyb3VwVGl0bGUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoaGFzRGlzYWJsZWRPcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwT3B0aW9uKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzR3JvdXBPcHRpb24gPSB0cnVlO1xyXG4gICAgICAgIG9wdGlvbi5ncm91cEluZGV4ID0gZC5ncm91cEluZGV4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgICBvcHRpb24uZGVzY3JpcHRpb24gPSBnZXRTdHJpbmcoZFtkZXNjcmlwdGlvbktleV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwcmVwYXJlZE9wdGlvbnMucHVzaChvcHRpb24pO1xyXG4gICAgICBpbmRleCsrO1xyXG5cclxuICAgICAgaWYgKGlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIGxldCBncm91cEluZGV4ID0gb3B0aW9uLmluZGV4O1xyXG4gICAgICAgIGhhc09wdGlvbkdyb3VwID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY2hpbGRPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgICAgIGQuaXNHcm91cE9wdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICBkLmdyb3VwSW5kZXggPSBncm91cEluZGV4O1xyXG5cclxuICAgICAgICAgIHByZXBhcmVPcHRpb24oZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKHByZXBhcmVPcHRpb24pO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyA9IHByZXBhcmVkT3B0aW9ucztcclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCA9IHByZXBhcmVkT3B0aW9ucy5sZW5ndGg7XHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleCA9IHRoaXMub3B0aW9ucy5sZW5ndGggLSAxO1xyXG4gICAgdGhpcy5uZXdWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuaGFzT3B0aW9uR3JvdXAgPSBoYXNPcHRpb25Hcm91cDtcclxuICAgIHRoaXMuc2V0U29ydGVkT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0U29ydGVkT3B0aW9ucygpIHtcclxuICAgIGxldCBzb3J0ZWRPcHRpb25zID0gWy4uLnRoaXMub3B0aW9uc107XHJcblxyXG4gICAgaWYgKHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0ICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgIGlmICh0aGlzLmhhc09wdGlvbkdyb3VwKSB7XHJcbiAgICAgICAgc29ydGVkT3B0aW9ucyA9IHRoaXMuc29ydE9wdGlvbnNHcm91cChzb3J0ZWRPcHRpb25zKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzb3J0ZWRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9ucyhzb3J0ZWRPcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc29ydGVkT3B0aW9ucyA9IHNvcnRlZE9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBzZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IFsuLi50aGlzLnNvcnRlZE9wdGlvbnNdO1xyXG4gICAgbGV0IG1heE9wdGlvbnNUb1Nob3cgPSB0aGlzLm9wdGlvbnNDb3VudCAqIDI7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IHRoaXMuZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKTtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG4gICAgbGV0IGVuZEluZGV4ID0gc3RhcnRJbmRleCArIG1heE9wdGlvbnNUb1Nob3cgLSAxO1xyXG4gICAgbGV0IGkgPSAwO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgbmV3T3B0aW9uLnZpc2libGVJbmRleCA9IGk7XHJcbiAgICAgIGkrKztcclxuICAgIH1cclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucyA9IHZpc2libGVPcHRpb25zLmZpbHRlcigoZCkgPT4ge1xyXG4gICAgICBsZXQgaW5WaWV3ID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAoZC5pc1Zpc2libGUgJiYgIWQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgaW5WaWV3ID0gaSA+PSBzdGFydEluZGV4ICYmIGkgPD0gZW5kSW5kZXg7XHJcbiAgICAgICAgZC52aXNpYmxlSW5kZXggPSBpO1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGluVmlldztcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgdmlzaWJsZU9wdGlvbnMgPSBbbmV3T3B0aW9uLCAuLi52aXNpYmxlT3B0aW9uc107XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9ucyA9IHZpc2libGVPcHRpb25zO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zUG9zaXRpb24oc3RhcnRJbmRleCkge1xyXG4gICAgaWYgKHN0YXJ0SW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gdGhpcy5nZXRWaXNpYmxlU3RhcnRJbmRleCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0b3AgPSBzdGFydEluZGV4ICogdGhpcy5vcHRpb25IZWlnaHQ7XHJcbiAgICB0aGlzLiRvcHRpb25zLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLCAke3RvcH1weCwgMClgO1xyXG4gICAgdGhpcy5zZXREYXRhKHRoaXMuJG9wdGlvbnMsICd0b3AnLCB0b3ApO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc1Rvb2x0aXAoKSB7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnMgPSB0aGlzLmdldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICBsZXQgaGFzT3B0aW9uRGVzY3JpcHRpb24gPSB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uO1xyXG5cclxuICAgIHZpc2libGVPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0ICRvcHRpb25FbGUgPSB0aGlzLiRkcm9wYm94LnF1ZXJ5U2VsZWN0b3IoYC52c2NvbXAtb3B0aW9uW2RhdGEtaW5kZXg9XCIke2QuaW5kZXh9XCJdYCk7XHJcblxyXG4gICAgICB0aGlzLnNldERhdGEoJG9wdGlvbkVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi10ZXh0JyksICd0b29sdGlwJywgZC5sYWJlbCk7XHJcblxyXG4gICAgICBpZiAoaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgICB0aGlzLnNldERhdGEoJG9wdGlvbkVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi1kZXNjcmlwdGlvbicpLCAndG9vbHRpcCcsIGQuZGVzY3JpcHRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFZhbHVlKHZhbHVlLCB0cmlnZ2VyRXZlbnQpIHtcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gWy4uLnZhbHVlXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdWYWx1ZSA9IHRoaXMubXVsdGlwbGUgPyB0aGlzLnNlbGVjdGVkVmFsdWVzIDogKHRoaXMuc2VsZWN0ZWRWYWx1ZXNbMF0gfHwgJycpO1xyXG4gICAgdGhpcy4kZWxlLnZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICB0aGlzLiRoaWRkZW5JbnB1dC52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkID0gKHRoaXMubWF4VmFsdWVzICYmIHRoaXMubWF4VmFsdWVzIDw9IHRoaXMuc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIHRoaXMuc2V0VmFsdWVUZXh0KCk7XHJcbiAgICB0aGlzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtdmFsdWUnLCB0aGlzLmlzTm90RW1wdHkodGhpcy5zZWxlY3RlZFZhbHVlcykpO1xyXG4gICAgdGhpcy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnbWF4LXZhbHVlLXNlbGVjdGVkJywgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkKTtcclxuXHJcbiAgICBpZiAodHJpZ2dlckV2ZW50KSB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLiRlbGUsICdjaGFuZ2UnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFZhbHVlVGV4dCgpIHtcclxuICAgIGxldCB2YWx1ZVRleHQgPSBbXTtcclxuICAgIGxldCB2YWx1ZVRvb2x0aXAgPSBbXTtcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XHJcbiAgICBsZXQgc2VsZWN0ZWRMZW5ndGggPSBzZWxlY3RlZFZhbHVlcy5sZW5ndGg7XHJcbiAgICBsZXQgbm9PZkRpc3BsYXlWYWx1ZXMgPSB0aGlzLm5vT2ZEaXNwbGF5VmFsdWVzO1xyXG4gICAgbGV0IG1heGltdW1WYWx1ZXNUb1Nob3cgPSA1MDtcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlc0NvdW50ID0gMDtcclxuXHJcbiAgICBpZiAodGhpcy5pc0FsbFNlbGVjdGVkICYmIHRoaXMuaXNTaG93QWxsU2VsZWN0ZWRUZXh0KSB7XHJcbiAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgQWxsICgke3NlbGVjdGVkTGVuZ3RofSlgO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChsZXQgZCBvZiB0aGlzLm9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPiBtYXhpbXVtVmFsdWVzVG9TaG93KSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWx1ZSA9IGQudmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICAgIGxldCBsYWJlbCA9IGQubGFiZWw7XHJcbiAgICAgICAgICB2YWx1ZVRleHQucHVzaChsYWJlbCk7XHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlc0NvdW50Kys7XHJcblxyXG4gICAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPD0gbm9PZkRpc3BsYXlWYWx1ZXMpIHtcclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZ1wiPiR7bGFiZWx9PC9zcGFuPmApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1vcmVTZWxlY3RlZE9wdGlvbnMgPSBzZWxlY3RlZExlbmd0aCAtIG5vT2ZEaXNwbGF5VmFsdWVzO1xyXG5cclxuICAgICAgaWYgKG1vcmVTZWxlY3RlZE9wdGlvbnMgPiAwKSB7XHJcbiAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZyBtb3JlLXZhbHVlLWNvdW50XCI+KyAke21vcmVTZWxlY3RlZE9wdGlvbnN9IG1vcmUuLi48L3NwYW4+YCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFnZ3JlZ2F0ZWRWYWx1ZVRleHQgPSB2YWx1ZVRleHQuam9pbignLCAnKTtcclxuXHJcbiAgICAgIGlmIChhZ2dyZWdhdGVkVmFsdWVUZXh0ID09PSAnJykge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBhZ2dyZWdhdGVkVmFsdWVUZXh0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgbGV0IG1heFZhbHVlcyA9IHRoaXMubWF4VmFsdWVzO1xyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmhhc0VsbGlwc2lzKHRoaXMuJHZhbHVlVGV4dCkgfHwgbWF4VmFsdWVzKSB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudFRleHQgPSBgJHtzZWxlY3RlZExlbmd0aH1gO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1heFZhbHVlcykge1xyXG4gICAgICAgICAgICAgIGNvdW50VGV4dCArPSBgIC8gJHttYXhWYWx1ZXN9YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqIHJlcGxhY2UgY29tbWEgZGVsaW1pdHRlZCBsaXN0IG9mIHNlbGVjdGlvbnMgd2l0aCBzaG9ydGVyIHRleHQgaW5kaWNhdGluZyBzZWxlY3Rpb24gY291bnQgKi9cclxuICAgICAgICAgICAgdGhpcy4kdmFsdWVUZXh0LmlubmVySFRNTCA9IGAke2NvdW50VGV4dH0gb3B0aW9uJHtzZWxlY3RlZExlbmd0aCA9PT0gMSA/ICcnIDogJ3MnfSBzZWxlY3RlZGA7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvKiogcmVtb3ZpbmcgdG9vbHRpcCBpZiBmdWxsIHZhbHVlIHRleHQgaXMgdmlzaWJsZSAqL1xyXG4gICAgICAgICAgICB2YWx1ZVRvb2x0aXAgPSBbXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldERhdGEodGhpcy4kdmFsdWVUZXh0LCAndG9vbHRpcCcsIHZhbHVlVG9vbHRpcC5qb2luKCcsICcpKTtcclxuICB9XHJcblxyXG4gIHNldFNlYXJjaFZhbHVlKHZhbHVlLCBza2lwSW5wdXRTZXQpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXNraXBJbnB1dFNldCkge1xyXG4gICAgICB0aGlzLiRzZWFyY2hJbnB1dC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZWFyY2hWYWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zQ291bnQgPSAwO1xyXG4gICAgbGV0IGhhc0V4YWN0T3B0aW9uID0gZmFsc2U7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmc7XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gc2VhcmNoVmFsdWU7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSB2YWx1ZTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNPcHRpb25Hcm91cCkge1xyXG4gICAgICB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcoc2VhcmNoVmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHJlc3VsdCA9IGlzT3B0aW9uVmlzaWJsZShkLCBzZWFyY2hWYWx1ZSwgaGFzRXhhY3RPcHRpb24sIHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nKTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHQuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24gPSByZXN1bHQuaGFzRXhhY3RPcHRpb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiAhaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgICB0aGlzLnNldE5ld09wdGlvbigpO1xyXG4gICAgICAgIHZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbW92ZU5ld09wdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ID0gdmlzaWJsZU9wdGlvbnNDb3VudDtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25Qcm9wKGluZGV4LCBrZXksIHZhbHVlKSB7XHJcbiAgICBpZiAoIXRoaXMub3B0aW9uc1tpbmRleF0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9uc1tpbmRleF1ba2V5XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc0hlaWdodCgpIHtcclxuICAgIHRoaXMuJG9wdGlvbnNMaXN0LnN0eWxlLmhlaWdodCA9IHRoaXMub3B0aW9uSGVpZ2h0ICogdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ICsgJ3B4JztcclxuICB9XHJcblxyXG4gIHNldERyb3Bib3hQb3NpdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnBvc2l0aW9uICE9PSAnYXV0bycpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtb3JlVmlzaWJsZVNpZGVzID0gdGhpcy5nZXRNb3JlVmlzaWJsZVNpZGVzKHRoaXMuJHdyYXBwZXIpO1xyXG4gICAgbGV0IHNob3dPbkxlZnQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiogY2hlY2sgdGhhdCBpcyBkcm9wYm94IGhpZGRlbiBvbiByaWdodCBlZGdlIC0gb25seSBpZiBjdXN0b20gd2lkdGggZ2l2ZW4gKi9cclxuICAgIGlmICh0aGlzLmRyb3Bib3hXaWR0aCkge1xyXG4gICAgICBsZXQgYnV0dG9uQ29vcmRzID0gdGhpcy4kdG9nZ2xlQnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBsZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICBsZXQgZHJvcGJveFdpZHRoID0gcGFyc2VGbG9hdCh0aGlzLmRyb3Bib3hXaWR0aCk7XHJcbiAgICAgIGxldCBoaWRkZW5PblJpZ2h0ID0gYnV0dG9uQ29vcmRzLmxlZnQgKyBkcm9wYm94V2lkdGggPiB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICBsZXQgaGlkZGVuT25MZWZ0ID0gZHJvcGJveFdpZHRoID4gYnV0dG9uQ29vcmRzLnJpZ2h0O1xyXG5cclxuICAgICAgaWYgKGhpZGRlbk9uUmlnaHQgJiYgIWhpZGRlbk9uTGVmdCkge1xyXG4gICAgICAgIHNob3dPbkxlZnQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAncG9zaXRpb24tdG9wJywgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCcpO1xyXG4gICAgdGhpcy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAncG9zaXRpb24tbGVmdCcsIHNob3dPbkxlZnQpO1xyXG4gIH1cclxuXHJcbiAgc2V0TmV3T3B0aW9uKCkge1xyXG4gICAgbGV0IHZhbHVlID0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsLnRyaW0oKTtcclxuXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIGxldCBuZXdJbmRleCA9IG5ld09wdGlvbi5pbmRleDtcclxuXHJcbiAgICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ3ZhbHVlJywgdmFsdWUpO1xyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdsYWJlbCcsIHZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIHZhbHVlLFxyXG4gICAgICAgIGxhYmVsOiB2YWx1ZSxcclxuICAgICAgICBpc0N1cnJlbnROZXc6IHRydWUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmFkZE9wdGlvbihkYXRhKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqIHNldCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBnZXQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgZ2V0VmlzaWJsZU9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXNpYmxlT3B0aW9ucyB8fCBbXTtcclxuICB9XHJcblxyXG4gIGdldFZhbHVlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyB0aGlzLnNlbGVjdGVkVmFsdWVzIDogdGhpcy5zZWxlY3RlZFZhbHVlc1swXTtcclxuICB9XHJcblxyXG4gIGdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCkge1xyXG4gICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCAvIHRoaXMub3B0aW9uSGVpZ2h0KTtcclxuICB9XHJcblxyXG4gIGdldFZpc2libGVTdGFydEluZGV4KCkge1xyXG4gICAgbGV0IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4ID0gdGhpcy5nZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCgpO1xyXG4gICAgbGV0IHN0YXJ0SW5kZXggPSBmaXJzdFZpc2libGVPcHRpb25JbmRleCAtIHRoaXMuaGFsZk9wdGlvbnNDb3VudDtcclxuXHJcbiAgICBpZiAoc3RhcnRJbmRleCA8IDApIHtcclxuICAgICAgc3RhcnRJbmRleCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN0YXJ0SW5kZXg7XHJcbiAgfVxyXG5cclxuICBnZXRUb29sdGlwQXR0clRleHQodGV4dCwgZWxsaXBzaXNPbmx5ID0gZmFsc2UsIGFsbG93SHRtbCA9IGZhbHNlKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgJ2RhdGEtdG9vbHRpcCc6IHRleHQgfHwgJycsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtZW50ZXItZGVsYXknOiB0aGlzLnRvb2x0aXBFbnRlckRlbGF5LFxyXG4gICAgICAnZGF0YS10b29sdGlwLXotaW5kZXgnOiB0aGlzLnpJbmRleCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1mb250LXNpemUnOiB0aGlzLnRvb2x0aXBGb250U2l6ZSxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1hbGlnbm1lbnQnOiB0aGlzLnRvb2x0aXBBbGlnbm1lbnQsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtbWF4LXdpZHRoJzogdGhpcy50b29sdGlwTWF4V2lkdGgsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtZWxsaXBzaXMtb25seSc6IGVsbGlwc2lzT25seSxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1hbGxvdy1odG1sJzogYWxsb3dIdG1sLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVzVGV4dChkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbk9iaihkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnZXRTdHJpbmcgPSB0aGlzLmdldFN0cmluZztcclxuICAgIGxldCBuZXdPcHRpb24gPSB7XHJcbiAgICAgIGluZGV4OiBkYXRhLmluZGV4LFxyXG4gICAgICB2YWx1ZTogZ2V0U3RyaW5nKGRhdGEudmFsdWUpLFxyXG4gICAgICBsYWJlbDogZ2V0U3RyaW5nKGRhdGEubGFiZWwpLFxyXG4gICAgICBkZXNjcmlwdGlvbjogZ2V0U3RyaW5nKGRhdGEuZGVzY3JpcHRpb24pLFxyXG4gICAgICBhbGlhczogdGhpcy5nZXRBbGlhcyhkYXRhLmFsaWFzKSxcclxuICAgICAgaXNDdXJyZW50TmV3OiBkYXRhLmlzQ3VycmVudE5ldyB8fCBmYWxzZSxcclxuICAgICAgaXNWaXNpYmxlOiB0cnVlLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3T3B0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmV3T3B0aW9uKCkge1xyXG4gICAgbGV0IGxhc3RPcHRpb24gPSB0aGlzLm9wdGlvbnNbdGhpcy5sYXN0T3B0aW9uSW5kZXhdO1xyXG5cclxuICAgIGlmICghbGFzdE9wdGlvbiB8fCAhbGFzdE9wdGlvbi5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsYXN0T3B0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uSW5kZXgodmFsdWUpIHtcclxuICAgIGxldCBpbmRleDtcclxuXHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgdGhpcy5vcHRpb25zLnNvbWUoKGQpID0+IHtcclxuICAgICAgICBpZiAoZC52YWx1ZSA9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgaW5kZXggPSBkLmluZGV4O1xyXG5cclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH1cclxuXHJcbiAgZ2V0TmV3VmFsdWUoKSB7XHJcbiAgICBsZXQgbmV3VmFsdWVzID0gdGhpcy5uZXdWYWx1ZXM7XHJcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5zZWxlY3RlZFZhbHVlcy5maWx0ZXIoKGQpID0+IG5ld1ZhbHVlcy5pbmRleE9mKGQpICE9PSAtMSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyByZXN1bHQgOiByZXN1bHRbMF07XHJcbiAgfVxyXG5cclxuICBnZXRBbGlhcyhhbGlhcykge1xyXG4gICAgaWYgKGFsaWFzKSB7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFsaWFzKSkge1xyXG4gICAgICAgIGFsaWFzID0gYWxpYXMuam9pbignLCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFsaWFzID0gYWxpYXMudG9TdHJpbmcoKS50cmltKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFsaWFzID0gYWxpYXMudG9Mb3dlckNhc2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFsaWFzID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFsaWFzO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlzcGxheVZhbHVlKCkge1xyXG4gICAgbGV0IGRpc3BsYXlWYWx1ZXMgPSBbXTtcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XHJcblxyXG4gICAgZm9yIChsZXQgZCBvZiB0aGlzLm9wdGlvbnMpIHtcclxuICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xKSB7XHJcbiAgICAgICAgZGlzcGxheVZhbHVlcy5wdXNoKGQubGFiZWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyBkaXNwbGF5VmFsdWVzIDogKGRpc3BsYXlWYWx1ZXNbMF0gfHwgJycpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcoc2VhcmNoVmFsdWUpIHtcclxuICAgIGxldCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG4gICAgbGV0IHJlc3VsdCA9IHt9O1xyXG4gICAgbGV0IGlzT3B0aW9uVmlzaWJsZSA9IHRoaXMuaXNPcHRpb25WaXNpYmxlO1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucyk7XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIHJlc3VsdFtkLmluZGV4XSA9IGQub3B0aW9ucy5zb21lKGUgPT4gaXNPcHRpb25WaXNpYmxlKGUsIHNlYXJjaFZhbHVlKS5pc1Zpc2libGUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgLyoqIGdldCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIG9wZW5Ecm9wYm94KGlzU2lsZW50KSB7XHJcbiAgICB0aGlzLnNldERyb3Bib3hQb3NpdGlvbigpO1xyXG4gICAgdGhpcy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG5cclxuICAgICAgaWYgKCFpc1NpbGVudCkge1xyXG4gICAgICAgIHRoaXMubW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCk7XHJcbiAgICAgICAgdGhpcy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnZm9jdXNlZCcpO1xyXG4gICAgICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIGNsb3NlRHJvcGJveChpc1NpbGVudCkge1xyXG4gICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgdGhpcy5yZW1vdmVPcHRpb25Gb2N1cygpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRyYW5zaXRpb25EdXJhdGlvbiA9IGlzU2lsZW50ID8gMCA6IHRoaXMudHJhbnNpdGlvbkR1cmF0aW9uO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQgZm9jdXNlZCcpO1xyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgICB9LCAwKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcbiAgICB9LCB0cmFuc2l0aW9uRHVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgbW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCkge1xyXG4gICAgaWYgKCF0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRTb3J0ZWRPcHRpb25zKCk7XHJcblxyXG4gICAgaWYgKCF0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCB8fCAhdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRHJvcGJveCgpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzT3BlbmVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFzQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gIH1cclxuXHJcbiAgZm9jdXNTZWFyY2hJbnB1dCgpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kc2VhcmNoSW5wdXQ7XHJcblxyXG4gICAgaWYgKCRlbGUpIHtcclxuICAgICAgJGVsZS5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9jdXNPcHRpb24oZGlyZWN0aW9uLCBlbGUpIHtcclxuICAgIGxldCAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3gucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24uZm9jdXNlZCcpO1xyXG4gICAgbGV0ICRuZXdGb2N1c2VkRWxlO1xyXG5cclxuICAgIGlmIChlbGUpIHtcclxuICAgICAgJG5ld0ZvY3VzZWRFbGUgPSBlbGU7XHJcbiAgICB9IGVsc2UgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAvKiBpZiBubyBlbGVtZW50IG9uIGZvY3VzIGNob29zZSBmaXJzdCB2aXNpYmxlIG9uZSAqL1xyXG4gICAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveC5xdWVyeVNlbGVjdG9yKGAudnNjb21wLW9wdGlvbltkYXRhLXZpc2libGUtaW5kZXg9XCIke2ZpcnN0VmlzaWJsZU9wdGlvbkluZGV4fVwiXWApO1xyXG5cclxuICAgICAgaWYgKHRoaXMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdkaXNhYmxlZCcpIHx8IHRoaXMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdncm91cC10aXRsZScpKSB7XHJcbiAgICAgICAgJG5ld0ZvY3VzZWRFbGUgPSB0aGlzLmdldFNpYmxpbmcoJG5ld0ZvY3VzZWRFbGUsICduZXh0Jyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy5nZXRTaWJsaW5nKCRmb2N1c2VkRWxlLCBkaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkbmV3Rm9jdXNlZEVsZSAmJiAkbmV3Rm9jdXNlZEVsZSAhPT0gJGZvY3VzZWRFbGUpIHtcclxuICAgICAgaWYgKCRmb2N1c2VkRWxlKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygkZm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5hZGRDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcCh0aGlzLmdldERhdGEoJG5ld0ZvY3VzZWRFbGUsICdpbmRleCcpLCB0cnVlKTtcclxuICAgICAgdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkbmV3Rm9jdXNlZEVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkZm9jdXNlZEVsZSkge1xyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3gucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24uZm9jdXNlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdTY3JvbGxUb3A7XHJcbiAgICBsZXQgY29udGFpbmVyUmVjdCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgb3B0aW9uUmVjdCA9ICRmb2N1c2VkRWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IGNvbnRhaW5lclRvcCA9IGNvbnRhaW5lclJlY3QudG9wO1xyXG4gICAgbGV0IGNvbnRhaW5lckJvdHRvbSA9IGNvbnRhaW5lclJlY3QuYm90dG9tO1xyXG4gICAgbGV0IGNvbnRhaW5lckhlaWdodCA9IGNvbnRhaW5lclJlY3QuaGVpZ2h0O1xyXG4gICAgbGV0IG9wdGlvblRvcCA9IG9wdGlvblJlY3QudG9wO1xyXG4gICAgbGV0IG9wdGlvbkJvdHRvbSA9IG9wdGlvblJlY3QuYm90dG9tO1xyXG4gICAgbGV0IG9wdGlvbkhlaWdodCA9IG9wdGlvblJlY3QuaGVpZ2h0O1xyXG4gICAgbGV0IG9wdGlvbk9mZnNldFRvcCA9ICRmb2N1c2VkRWxlLm9mZnNldFRvcDtcclxuICAgIGxldCBvcHRpb25zVG9wID0gdGhpcy5nZXREYXRhKHRoaXMuJG9wdGlvbnMsICd0b3AnLCAnbnVtYmVyJyk7XHJcblxyXG4gICAgLyogaWYgb3B0aW9uIGhpZGRlbiBvbiB0b3AgKi9cclxuICAgIGlmIChjb250YWluZXJUb3AgPiBvcHRpb25Ub3ApIHtcclxuICAgICAgbmV3U2Nyb2xsVG9wID0gb3B0aW9uT2Zmc2V0VG9wICsgb3B0aW9uc1RvcDtcclxuICAgIH0gZWxzZSBpZiAoY29udGFpbmVyQm90dG9tIDwgb3B0aW9uQm90dG9tKSB7XHJcbiAgICAgIC8qIGlmIG9wdGlvbiBoaWRkZW4gb24gYm90dG9tICovXHJcbiAgICAgIG5ld1Njcm9sbFRvcCA9IG9wdGlvbk9mZnNldFRvcCAtIGNvbnRhaW5lckhlaWdodCArIG9wdGlvbkhlaWdodCArIG9wdGlvbnNUb3A7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5ld1Njcm9sbFRvcCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wID0gbmV3U2Nyb2xsVG9wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlT3B0aW9uRm9jdXMoKSB7XHJcbiAgICBsZXQgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94LnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnKTtcclxuXHJcbiAgICBpZiAoISRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCRmb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcChudWxsKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdE9wdGlvbigkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGluZyA9ICF0aGlzLmhhc0NsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG5cclxuICAgIGlmIChpc0FkZGluZykge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8qKiBvbiBzZWxlY3Rpbmcgc2FtZSB2YWx1ZSBpbiBzaW5nbGUgc2VsZWN0ICovXHJcbiAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlID0gdGhpcy5nZXREYXRhKCRlbGUsICd2YWx1ZScpO1xyXG4gICAgbGV0IHNlbGVjdGVkSW5kZXggPSB0aGlzLmdldERhdGEoJGVsZSwgJ2luZGV4Jyk7XHJcblxyXG4gICAgdGhpcy50b2dnbGVTZWxlY3RlZFByb3Aoc2VsZWN0ZWRJbmRleCwgaXNBZGRpbmcpO1xyXG5cclxuICAgIGlmIChpc0FkZGluZykge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkUHJvcCh0aGlzLmdldE9wdGlvbkluZGV4KHNlbGVjdGVkVmFsdWVzWzBdKSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0ZWRWYWx1ZXMgPSBbc2VsZWN0ZWRWYWx1ZV07XHJcbiAgICAgICAgbGV0ICRwcmV2U2VsZWN0ZWRPcHRpb24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24uc2VsZWN0ZWQnKTtcclxuXHJcbiAgICAgICAgaWYgKCRwcmV2U2VsZWN0ZWRPcHRpb24pIHtcclxuICAgICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoJHByZXZTZWxlY3RlZE9wdGlvbiwgJ3NlbGVjdGVkJywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy50b2dnbGVDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUl0ZW1Gcm9tQXJyYXkoc2VsZWN0ZWRWYWx1ZXMsIHNlbGVjdGVkVmFsdWUpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmhhc0NsYXNzKCRlbGUsICdjdXJyZW50LW5ldycpKSB7XHJcbiAgICAgIHRoaXMuYmVmb3JlU2VsZWN0TmV3VmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdEZvY3VzZWRPcHRpb24oKSB7XHJcbiAgICB0aGlzLnNlbGVjdE9wdGlvbih0aGlzLiRkcm9wYm94LnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnKSk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVBbGxPcHRpb25zKGlzU2VsZWN0ZWQpIHtcclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSB8fCB0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgaXNTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlzU2VsZWN0ZWQgPSAhdGhpcy5oYXNDbGFzcyh0aGlzLiR0b2dnbGVBbGxPcHRpb25zLCAnY2hlY2tlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLmlzRGlzYWJsZWQgfHwgZC5pc0N1cnJlbnROZXcgfHwgZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGlzU2VsZWN0ZWQ7XHJcblxyXG4gICAgICBpZiAoaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goZC52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZShzZWxlY3RlZFZhbHVlcywgdHJ1ZSk7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUFsbE9wdGlvbnNDbGFzcyhpc0FsbFNlbGVjdGVkKSB7XHJcbiAgICBpZiAodHlwZW9mIGlzQWxsU2VsZWN0ZWQgIT09ICdib29sZWFuJykge1xyXG4gICAgICBpc0FsbFNlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIGlzQWxsU2VsZWN0ZWQgPSAhdGhpcy5vcHRpb25zLnNvbWUoKGQpID0+IHtcclxuICAgICAgICAgIHJldHVybiAhZC5pc1NlbGVjdGVkICYmICFkLmlzRGlzYWJsZWQgJiYgIWQuaXNHcm91cFRpdGxlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVDbGFzcyh0aGlzLiR0b2dnbGVBbGxPcHRpb25zLCAnY2hlY2tlZCcsIGlzQWxsU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gaXNBbGxTZWxlY3RlZDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUZvY3VzZWRQcm9wKGluZGV4LCBpc0ZvY3VzZWQgPSBmYWxzZSkge1xyXG4gICAgaWYgKHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4KSB7XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9uUHJvcCh0aGlzLmZvY3VzZWRPcHRpb25JbmRleCwgJ2lzRm9jdXNlZCcsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AoaW5kZXgsICdpc0ZvY3VzZWQnLCBpc0ZvY3VzZWQpO1xyXG4gICAgdGhpcy5mb2N1c2VkT3B0aW9uSW5kZXggPSBpbmRleDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZVNlbGVjdGVkUHJvcChpbmRleCwgaXNTZWxlY3RlZCA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AoaW5kZXgsICdpc1NlbGVjdGVkJywgaXNTZWxlY3RlZCk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1RvcCgpIHtcclxuICAgIGxldCBpc0Nsb3NlZCA9ICF0aGlzLmlzT3BlbmVkKCk7XHJcblxyXG4gICAgaWYgKGlzQ2xvc2VkKSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3godHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNjcm9sbFRvcCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cclxuICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNDbG9zZWQpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3godHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5iZWZvcmVWYWx1ZVNldCh0cnVlKTtcclxuICAgIHRoaXMuc2V0VmFsdWUobnVsbCwgdHJ1ZSk7XHJcbiAgICB0aGlzLmFmdGVyVmFsdWVTZXQoKTtcclxuICB9XHJcblxyXG4gIGJlZm9yZVZhbHVlU2V0KGlzUmVzZXQpIHtcclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzUmVzZXQgPyBmYWxzZSA6IHVuZGVmaW5lZCk7XHJcbiAgfVxyXG5cclxuICBhZnRlclZhbHVlU2V0KCkge1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIGFmdGVyU2V0T3B0aW9ucygpIHtcclxuICAgIHRoaXMuc2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgdGhpcy5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgYWRkT3B0aW9uKGRhdGEsIHJlcmVuZGVyKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGFzdE9wdGlvbkluZGV4Kys7XHJcbiAgICBkYXRhLmluZGV4ID0gdGhpcy5sYXN0T3B0aW9uSW5kZXg7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXRPcHRpb25PYmooZGF0YSk7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnB1c2gobmV3T3B0aW9uKTtcclxuICAgIHRoaXMuc29ydGVkT3B0aW9ucy5wdXNoKG5ld09wdGlvbik7XHJcblxyXG4gICAgaWYgKHJlcmVuZGVyKSB7XHJcbiAgICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB0aGlzLmFmdGVyU2V0T3B0aW9ucygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlT3B0aW9uKGluZGV4KSB7XHJcbiAgICBpZiAoIWluZGV4ICYmIGluZGV4ICE9IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXgtLTtcclxuICB9XHJcblxyXG4gIHJlbW92ZU5ld09wdGlvbigpIHtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgdGhpcy5yZW1vdmVPcHRpb24obmV3T3B0aW9uLmluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGJlZm9yZVNlbGVjdE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcbiAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgdGhpcy5uZXdWYWx1ZXMucHVzaChuZXdPcHRpb24udmFsdWUpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnaXNDdXJyZW50TmV3JywgZmFsc2UpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnaXNOZXcnLCB0cnVlKTtcclxuXHJcbiAgICAvKiogdXNpbmcgc2V0VGltZW91dCB0byBmaXggdGhlIGlzc3VlIG9mIGRyb3Bib3ggZ2V0dGluZyBjbG9zZWQgb24gc2VsZWN0ICovXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBzb3J0T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gb3B0aW9ucy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIGlmICghYS5pc1NlbGVjdGVkICYmICFiLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSBlbHNlIGlmIChhLmlzU2VsZWN0ZWQgJiYgKCFiLmlzU2VsZWN0ZWQgfHwgYS5pbmRleCA8IGIuaW5kZXgpKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNvcnRPcHRpb25zR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHNvcnRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9ucztcclxuICAgIG9wdGlvbnMgPSB0aGlzLnN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpO1xyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBsZXQgY2hpbGRPcHRpb25zID0gZC5vcHRpb25zO1xyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBjaGlsZE9wdGlvbnMuc29tZShlID0+IGUuaXNTZWxlY3RlZCk7XHJcblxyXG4gICAgICBpZiAoZC5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgc29ydE9wdGlvbnMoY2hpbGRPcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc29ydE9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZGVzdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGlzT3B0aW9uVmlzaWJsZShkLCBzZWFyY2hWYWx1ZSwgaGFzRXhhY3RPcHRpb24sIHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nKSB7XHJcbiAgICBsZXQgdmFsdWUgPSBkLmxhYmVsLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBkLmRlc2NyaXB0aW9uO1xyXG4gICAgbGV0IGFsaWFzID0gZC5hbGlhcztcclxuICAgIGxldCBpc1Zpc2libGUgPSB2YWx1ZS5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgaWYgKGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgIGlzVmlzaWJsZSA9IHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nW2QuaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhbGlhcyAmJiAhaXNWaXNpYmxlKSB7XHJcbiAgICAgIGlzVmlzaWJsZSA9IGFsaWFzLmluZGV4T2Yoc2VhcmNoVmFsdWUpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGVzY3JpcHRpb24gJiYgIWlzVmlzaWJsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSBkZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoVmFsdWUpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBkLmlzVmlzaWJsZSA9IGlzVmlzaWJsZTtcclxuXHJcbiAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgIGhhc0V4YWN0T3B0aW9uID0gdmFsdWUgPT09IHNlYXJjaFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzVmlzaWJsZSxcclxuICAgICAgaGFzRXhhY3RPcHRpb24sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgbGV0IGNoaWxkT3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIC8qKiBnZXR0aW5nIGFsbCBncm91cCB0aXRsZSAqL1xyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIGxldCBjaGlsZEFycmF5ID0gW107XHJcbiAgICAgICAgZC5vcHRpb25zID0gY2hpbGRBcnJheTtcclxuICAgICAgICBjaGlsZE9wdGlvbnNbZC5pbmRleF0gPSBjaGlsZEFycmF5O1xyXG5cclxuICAgICAgICByZXN1bHQucHVzaChkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqIGdldHRpbmcgYWxsIGdyb3VwIG9wdGlvbnMgKi9cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0dyb3VwT3B0aW9uKSB7XHJcbiAgICAgICAgY2hpbGRPcHRpb25zW2QuZ3JvdXBJbmRleF0ucHVzaChkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGRlc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICByZXN1bHQucHVzaChkKTtcclxuICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChkLm9wdGlvbnMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8qKiBoZWxwZXIgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYWRkQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICAgIHRoaXMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgX3RoaXMuY2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDbGFzcygkZWxlLCBjbGFzc05hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgdGhpcy5nZXRFbGVtZW50cygkZWxlKS5mb3JFYWNoKChfdGhpcykgPT4ge1xyXG4gICAgICBfdGhpcy5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUNsYXNzKCRlbGUsIGNsYXNzTmFtZSwgaXNBZGQpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQWRkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgaXNBZGQgPSBCb29sZWFuKGlzQWRkKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNBZGRlZDtcclxuXHJcbiAgICB0aGlzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgIGlzQWRkZWQgPSBfdGhpcy5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSwgaXNBZGQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlzQWRkZWQ7XHJcbiAgfVxyXG5cclxuICBoYXNDbGFzcygkZWxlLCBjbGFzc05hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XHJcbiAgfVxyXG5cclxuICBpc0VtcHR5KHZhbHVlKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBpc05vdEVtcHR5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuaXNFbXB0eSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzZXREYXRhKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUuZGF0YXNldFtuYW1lXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3R5bGVUZXh0KHByb3BzLCBza2lwQXR0ck5hbWUpIHtcclxuICAgIGxldCByZXN1bHQgPSAnJztcclxuXHJcbiAgICBmb3IgKGxldCBrIGluIHByb3BzKSB7XHJcbiAgICAgIHJlc3VsdCArPSBgJHtrfTogJHtwcm9wc1trXX07YDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0ICYmICFza2lwQXR0ck5hbWUpIHtcclxuICAgICAgcmVzdWx0ID0gYHN0eWxlPVwiJHtyZXN1bHR9XCJgO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50cygkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkZWxlLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGUgPSBbJGVsZV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGU7XHJcbiAgfVxyXG5cclxuICBnZXREYXRhKCRlbGUsIG5hbWUsIHR5cGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHZhbHVlID0gJGVsZSA/ICRlbGUuZGF0YXNldFtuYW1lXSA6ICcnO1xyXG5cclxuICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xyXG4gICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpIHx8IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICAgIHZhbHVlID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICByZW1vdmVJdGVtRnJvbUFycmF5KGFycmF5LCB2YWx1ZSwgY2xvbmVBcnJheSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCAhYXJyYXkubGVuZ3RoIHx8ICF2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNsb25lQXJyYXkpIHtcclxuICAgICAgYXJyYXkgPSBbLi4uYXJyYXldO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbmRleCA9IGFycmF5LmluZGV4T2YodmFsdWUpO1xyXG5cclxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXJyYXk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVBcnJheUVtcHR5KGFycmF5KSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpIHx8ICFhcnJheS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhcnJheS5maWx0ZXIoKGQpID0+ICEhZCk7XHJcbiAgfVxyXG5cclxuICBnZXRNb3JlVmlzaWJsZVNpZGVzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGJveCA9ICRlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgYXZhaWxhYmxlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIGxldCBhdmFpbGFibGVIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICBsZXQgbGVmdEFyZWEgPSBib3gubGVmdDtcclxuICAgIGxldCB0b3BBcmVhID0gYm94LnRvcDtcclxuICAgIGxldCByaWdodEFyZWEgPSBhdmFpbGFibGVXaWR0aCAtIGxlZnRBcmVhIC0gYm94LndpZHRoO1xyXG4gICAgbGV0IGJvdHRvbUFyZWEgPSBhdmFpbGFibGVIZWlnaHQgLSB0b3BBcmVhIC0gYm94LmhlaWdodDtcclxuICAgIGxldCBob3Jpem9udGFsID0gbGVmdEFyZWEgPiByaWdodEFyZWEgPyAnbGVmdCcgOiAncmlnaHQnO1xyXG4gICAgbGV0IHZlcnRpY2FsID0gdG9wQXJlYSA+IGJvdHRvbUFyZWEgPyAndG9wJyA6ICdib3R0b20nO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGhvcml6b250YWwsXHJcbiAgICAgIHZlcnRpY2FsLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGdldFNpYmxpbmcoJGVsZSwgZGlyZWN0aW9uKSB7XHJcbiAgICBsZXQgcHJvcE5hbWUgPSBkaXJlY3Rpb24gPT09ICduZXh0JyA/ICduZXh0RWxlbWVudFNpYmxpbmcnIDogJ3ByZXZpb3VzRWxlbWVudFNpYmxpbmcnO1xyXG5cclxuICAgIGRvIHtcclxuICAgICAgaWYgKCRlbGUpIHtcclxuICAgICAgICAkZWxlID0gJGVsZVtwcm9wTmFtZV07XHJcbiAgICAgIH1cclxuICAgIH0gd2hpbGUgKHRoaXMuaGFzQ2xhc3MoJGVsZSwgJ2Rpc2FibGVkJykgfHwgdGhpcy5oYXNDbGFzcygkZWxlLCAnZ3JvdXAtdGl0bGUnKSk7XHJcblxyXG4gICAgcmV0dXJuICRlbGU7XHJcbiAgfVxyXG5cclxuICBnZXRBdHRyaWJ1dGVzVGV4dChkYXRhKSB7XHJcbiAgICBsZXQgaHRtbCA9ICcnO1xyXG5cclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICByZXR1cm4gaHRtbDtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBrIGluIGRhdGEpIHtcclxuICAgICAgbGV0IHZhbHVlID0gZGF0YVtrXTtcclxuXHJcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaHRtbCArPSBgICR7a309XCIke3ZhbHVlfVwiIGA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaHRtbDtcclxuICB9XHJcblxyXG4gIGNvbnZlcnRUb0Jvb2xlYW4odmFsdWUsIGRlZmF1bHRWYWx1ZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICB2YWx1ZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgaGFzRWxsaXBzaXMoJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZS5zY3JvbGxXaWR0aCA+ICRlbGUub2Zmc2V0V2lkdGg7XHJcbiAgfVxyXG5cclxuICBnZXRTdHJpbmcodGV4dCkge1xyXG4gICAgcmV0dXJuICh0ZXh0IHx8IHRleHQgPT09IDApID8gdGV4dC50b1N0cmluZygpIDogJyc7XHJcbiAgfVxyXG4gIC8qKiBoZWxwZXIgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogc3RhdGljIG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHN0YXRpYyBpbml0KG9wdGlvbnMpIHtcclxuICAgIGxldCAkZWxlQXJyYXkgPSBvcHRpb25zLmVsZTtcclxuXHJcbiAgICBpZiAoISRlbGVBcnJheSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNpbmdsZUVsZSA9IGZhbHNlO1xyXG5cclxuICAgIGlmICh0eXBlb2YgJGVsZUFycmF5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAkZWxlQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCRlbGVBcnJheSk7XHJcblxyXG4gICAgICBpZiAoISRlbGVBcnJheSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICgkZWxlQXJyYXkubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgJGVsZUFycmF5ID0gWyRlbGVBcnJheV07XHJcbiAgICAgIHNpbmdsZUVsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGluc3RhbmNlcyA9IFtdO1xyXG4gICAgJGVsZUFycmF5LmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgb3B0aW9ucy5lbGUgPSAkZWxlO1xyXG4gICAgICBpbnN0YW5jZXMucHVzaChuZXcgVmlydHVhbFNlbGVjdChvcHRpb25zKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gc2luZ2xlRWxlID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNsb3NlQWxsRHJvcGJveCgkZWxlVG9LZWVwT3Blbikge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZzY29tcC13cmFwcGVyJykuZm9yRWFjaCgoJGVsZSkgPT4ge1xyXG4gICAgICBpZiAoJGVsZVRvS2VlcE9wZW4gJiYgJGVsZVRvS2VlcE9wZW4gPT09ICRlbGUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRlbGUucGFyZW50RWxlbWVudC52aXJ0dWFsU2VsZWN0LmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVzZXRGb3JtKGUpIHtcclxuICAgIGxldCAkZm9ybSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKTtcclxuXHJcbiAgICBpZiAoISRmb3JtKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcudnNjb21wLXdyYXBwZXInKS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgICRlbGUucGFyZW50RWxlbWVudC52aXJ0dWFsU2VsZWN0LnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZXNldCgpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldERpc2FibGVkT3B0aW9uc01ldGhvZChvcHRpb25zKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRvZ2dsZVNlbGVjdEFsbChpc1NlbGVjdGVkKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QudG9nZ2xlQWxsT3B0aW9ucyhpc1NlbGVjdGVkKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0FsbFNlbGVjdGVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5pc0FsbFNlbGVjdGVkO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFkZE9wdGlvbk1ldGhvZChkYXRhKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QuYWRkT3B0aW9uKGRhdGEsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE5ld1ZhbHVlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5nZXROZXdWYWx1ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHZlcnNpb24oKSB7XHJcbiAgICByZXR1cm4gdmlydHVhbFNlbGVjdFZlcnNpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RGlzcGxheVZhbHVlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5nZXREaXNwbGF5VmFsdWUoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvcGVuTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5vcGVuRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNsb3NlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gc3RhcnQgKi9cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCBWaXJ0dWFsU2VsZWN0LnJlc2V0Rm9ybSk7XHJcblxyXG53aW5kb3cuVmlydHVhbFNlbGVjdCA9IFZpcnR1YWxTZWxlY3Q7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL3ZpcnR1YWwtc2VsZWN0LmpzXCIpO1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgdXNlZCAnZXhwb3J0cycgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuIl0sInNvdXJjZVJvb3QiOiIifQ==